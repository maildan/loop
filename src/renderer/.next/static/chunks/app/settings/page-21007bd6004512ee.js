(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{5292:(e,t,a)=>{Promise.resolve().then(a.bind(a,7918))},7918:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var s=a(4568),l=a(7620);let n={container:"w-full max-w-4xl mx-auto px-4 py-6 space-y-6 min-w-0",pageTitle:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6",navButton:"px-4 py-2 rounded-lg text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",navButtonActive:"bg-blue-600 text-white shadow-md",navButtonInactive:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700",section:"space-y-6",sectionCard:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",sectionHeader:"flex items-center gap-3 mb-4 pb-3 border-b border-slate-200 dark:border-slate-700",sectionIcon:"w-6 h-6 text-blue-600 flex-shrink-0",sectionTitle:"text-xl font-semibold text-slate-900 dark:text-slate-100",settingItem:"space-y-4",settingRow:"flex items-center justify-between py-3 border-b border-slate-200 dark:border-slate-700 last:border-b-0 min-h-[60px]",settingLabel:"flex-1 pr-4",settingTitle:"font-medium text-slate-900 dark:text-slate-100 text-base",settingDescription:"text-sm text-slate-600 dark:text-slate-400 mt-1 max-w-md",settingControl:"flex items-center gap-3 flex-shrink-0",textInput:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 transition-colors",numberInput:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 transition-colors",select:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 min-w-[120px] transition-colors",toggle:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 cursor-pointer",toggleActive:"bg-blue-600",toggleInactive:"bg-slate-200 dark:bg-slate-600",toggleSwitch:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ease-in-out shadow-sm",toggleSwitchActive:"translate-x-6",toggleSwitchInactive:"translate-x-1",actions:"flex justify-end gap-3 pt-6 border-t border-slate-200 dark:border-slate-700",button:"inline-flex items-center px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",primaryButton:"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg focus:ring-blue-500",secondaryButton:"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 focus:ring-slate-500",loading:"flex items-center justify-center h-64",loadingContent:"text-center",spinner:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4",loadingText:"text-slate-600 dark:text-slate-400"};var i=a(373),o=a(7832),r=a(5321),c=a(7216),d=a(6872),u=a(4508),m=a(9594);let x=[{id:"app",label:"앱 설정",icon:u.A},{id:"account",label:"사용자 프로필",icon:m.A},{id:"notifications",label:"알림",icon:o.A},{id:"ui",label:"UI/UX",icon:d.A},{id:"keyboard",label:"키보드",icon:c.A},{id:"performance",label:"성능",icon:r.A}],h=l.memo(e=>{let{section:t,isActive:a,onClick:l}=e,i=t.icon;return(0,s.jsxs)("button",{type:"button",className:"".concat(n.navButton," ").concat(a?n.navButtonActive:n.navButtonInactive),onClick:l,"aria-current":a?"page":void 0,children:[(0,s.jsx)(i,{className:"w-4 h-4 mr-2"}),t.label]})});h.displayName="SectionButton";let p=l.memo(e=>{let{activeSection:t,onSectionChange:a}=e,n=(0,l.useCallback)(e=>()=>a(e),[a]);return(0,s.jsx)("nav",{className:"flex flex-wrap gap-2 mb-6",role:"navigation","aria-label":"설정 네비게이션",children:x.map(e=>(0,s.jsx)(h,{section:e,isActive:t===e.id,onClick:n(e.id)},e.id))})});p.displayName="SettingsNavigation";let g=l.memo(e=>{let{title:t,description:a,control:l}=e;return(0,s.jsxs)("div",{className:n.settingRow,children:[(0,s.jsxs)("div",{className:n.settingLabel,children:[(0,s.jsx)("div",{className:n.settingTitle,children:t}),(0,s.jsx)("div",{className:n.settingDescription,children:a})]}),(0,s.jsx)("div",{className:n.settingControl,children:l})]})});g.displayName="SettingItem";let b=l.memo(e=>{let{checked:t,onChange:a,disabled:i=!1}=e,o=(0,l.useCallback)(()=>{i||a(!t)},[t,a,i]),r=(0,l.useCallback)(e=>{"Enter"!==e.key&&" "!==e.key||i||(e.preventDefault(),a(!t))},[t,a,i]);return(0,s.jsx)("button",{type:"button",role:"switch","aria-checked":t,disabled:i,className:"".concat(n.toggle," ").concat(t?n.toggleActive:n.toggleInactive," ").concat(i?"opacity-50 cursor-not-allowed":""),onClick:o,onKeyDown:r,children:(0,s.jsx)("span",{className:"".concat(n.toggleSwitch," ").concat(t?n.toggleSwitchActive:n.toggleSwitchInactive)})})});b.displayName="Toggle";var v=a(7117),f=a(662),j=a(4244);let N=l.memo(e=>{let{title:t,description:a,control:l}=e;return(0,s.jsxs)("div",{className:n.settingRow,children:[(0,s.jsxs)("div",{className:n.settingLabel,children:[(0,s.jsx)("div",{className:n.settingTitle,children:t}),(0,s.jsx)("div",{className:n.settingDescription,children:a})]}),(0,s.jsx)("div",{className:n.settingControl,children:l})]})});N.displayName="SettingItem";let y=()=>{let[e,t]=(0,l.useState)(!1),a=(0,l.useCallback)(async()=>{var e,a;if(!(null==(a=window.electronAPI)||null==(e=a.oauth)?void 0:e.revokeAuth))return void alert("이 기능은 데스크톱 앱에서만 동작합니다");if(window.confirm("Google 계정 연결을 끊고 로그아웃하시겠습니까?")){t(!0);try{let e=await window.electronAPI.oauth.revokeAuth();e&&e.success?(alert("Google 로그아웃 완료"),setTimeout(()=>window.location.reload(),300)):alert("로그아웃에 실패했습니다. 콘솔을 확인하세요.")}catch(e){console.error("Failed to revoke auth",e),alert("로그아웃 중 오류가 발생했습니다")}finally{t(!1)}}},[]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(j.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"Google 계정"})]}),(0,s.jsx)("div",{className:n.settingItem,children:(0,s.jsx)(N,{title:"Google 로그아웃",description:"앱에 연결된 Google 계정의 토큰을 삭제하고 연결을 해제합니다",control:(0,s.jsx)("button",{type:"button",className:"".concat(n.button," ").concat(n.secondaryButton),onClick:a,disabled:e,children:e?"로그아웃 중...":"로그아웃"})})})]})},k=l.memo(e=>{let{settings:t,updateSetting:a,setTheme:i}=e,{theme:o}=(0,v.D)(),{availableFonts:r,loading:c,error:d,setFont:m}=function(){let[e,t]=(0,l.useState)(""),[a,s]=(0,l.useState)([]),[n,i]=(0,l.useState)(!0),[o,r]=(0,l.useState)(null),c=(0,l.useCallback)(async()=>{try{var e,t,a;let s=await (null==(a=window.electronAPI)||null==(t=a.font)||null==(e=t.generateCSS)?void 0:e.call(t));if(s){let e=document.getElementById("dynamic-fonts");e&&e.remove();let t=document.createElement("style");t.id="dynamic-fonts",t.textContent=s,document.head.appendChild(t),f.V.info("DYNAMIC_FONT","동적 폰트 CSS 주입 완료",{cssLength:s.length})}}catch(e){f.V.warn("DYNAMIC_FONT","폰트 CSS 주입 실패",e)}},[]),d=(0,l.useCallback)(async()=>{try{var e,t,a,l,n,o,d,u,m;i(!0),r(null),await (null==(a=window.electronAPI)||null==(t=a.font)||null==(e=t.initialize)?void 0:e.call(t));let[x,h]=await Promise.all([(null==(o=window.electronAPI)||null==(n=o.font)||null==(l=n.getAvailableFonts)?void 0:l.call(n))||[],(null==(m=window.electronAPI)||null==(u=m.font)||null==(d=u.getStaticFonts)?void 0:d.call(u))||[]]),p=[...h,...x];s(p),await c(),f.V.info("DYNAMIC_FONT","폰트 목록 로드 완료",{dynamicCount:x.length,staticCount:h.length,totalCount:p.length})}catch(e){f.V.error("DYNAMIC_FONT","폰트 로드 실패",e),r("폰트를 불러오는데 실패했습니다."),s([{value:"system-ui, sans-serif",label:"시스템 기본",category:"system"},{value:"-apple-system, BlinkMacSystemFont, sans-serif",label:"Apple 시스템",category:"system"}])}finally{i(!1)}},[c]);return(0,l.useEffect)(()=>{(async()=>{await d(),t((getComputedStyle(document.documentElement).getPropertyValue("--app-font-family")||getComputedStyle(document.body).fontFamily).trim())})()},[d]),{currentFont:e,availableFonts:a,setFont:(0,l.useCallback)(e=>{try{document.documentElement.style.setProperty("--app-font-family",e),document.body.style.fontFamily=e;let a=document.querySelectorAll("*");a.forEach(t=>{t instanceof HTMLElement&&(t.style.fontFamily=e)}),t(e),f.V.info("DYNAMIC_FONT","\uD83D\uDD25 기가차드 폰트 적용 완료",{family:e,appliedToElements:a.length})}catch(e){f.V.error("DYNAMIC_FONT","폰트 적용 실패",e)}},[]),loading:n,error:o,reload:(0,l.useCallback)(async()=>{try{var e,t,a;await (null==(a=window.electronAPI)||null==(t=a.font)||null==(e=t.reload)?void 0:e.call(t)),await d()}catch(e){f.V.error("DYNAMIC_FONT","폰트 리로드 실패",e)}},[d])}}(),[x,h]=(0,l.useState)(t.theme);(0,l.useEffect)(()=>{h(t.theme)},[t.theme]),(0,l.useEffect)(()=>{o!==x&&"system"!==o&&h(o)},[o,x]);let p=(0,l.useCallback)(async e=>{let s=e.target.value;try{h(s),i(s),await a("app","theme",s),f.V.info("APP_SETTINGS","Theme updated successfully",{theme:s,source:"settings_page"})}catch(e){f.V.error("APP_SETTINGS","Failed to update theme",e),h(t.theme)}},[a,i,t.theme]),j=(0,l.useCallback)(e=>{a("app","language",e.target.value)},[a]),N=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);if(t>=10&&t<=24)try{document.documentElement.style.setProperty("--app-font-size","".concat(t,"px")),document.body.style.fontSize="".concat(t,"px"),a("app","fontSize",t),f.V.info("APP_SETTINGS","\uD83D\uDD25 기가차드 폰트 크기 변경 완료",{newSize:t,timestamp:Date.now()})}catch(e){f.V.error("APP_SETTINGS","폰트 크기 변경 실패",e)}},[a]),k=(0,l.useCallback)(e=>{let t=e.target.value;try{m(t),a("app","fontFamily",t),f.V.info("APP_SETTINGS","\uD83D\uDD25 기가차드 폰트 변경 완료",{newFont:t,timestamp:Date.now()})}catch(e){f.V.error("APP_SETTINGS","폰트 변경 실패",e)}},[a,m]),w=(0,l.useCallback)(e=>{a("app","autoSave",e)},[a]),C=(0,l.useCallback)(e=>{a("app","startMinimized",e)},[a]),S=(0,l.useCallback)(e=>{a("app","minimizeToTray",e)},[a]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(u.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"앱 설정"})]}),(0,s.jsxs)("div",{className:n.settingItem,children:[(0,s.jsx)(g,{title:"테마",description:"앱의 외관 테마를 선택하세요",control:(0,s.jsxs)("select",{value:x,onChange:p,className:n.select,children:[(0,s.jsx)("option",{value:"system",children:"시스템"}),(0,s.jsx)("option",{value:"light",children:"라이트"}),(0,s.jsx)("option",{value:"dark",children:"다크"})]})}),(0,s.jsx)(g,{title:"언어",description:"앱에서 사용할 언어를 선택하세요",control:(0,s.jsxs)("select",{value:t.language,onChange:j,className:n.select,children:[(0,s.jsx)("option",{value:"ko",children:"한국어"}),(0,s.jsx)("option",{value:"en",children:"English"}),(0,s.jsx)("option",{value:"ja",children:"日本語"})]})}),(0,s.jsx)(g,{title:"자동 저장",description:"작업 내용을 자동으로 저장합니다",control:(0,s.jsx)(b,{checked:t.autoSave,onChange:w})}),(0,s.jsx)(g,{title:"최소화 상태로 시작",description:"앱 시작 시 최소화된 상태로 실행합니다",control:(0,s.jsx)(b,{checked:t.startMinimized,onChange:C})}),(0,s.jsx)(g,{title:"시스템 트레이로 최소화",description:"창을 닫을 때 시스템 트레이로 최소화합니다",control:(0,s.jsx)(b,{checked:t.minimizeToTray,onChange:S})}),(0,s.jsx)(g,{title:"글꼴 크기",description:"앱에서 사용할 글꼴 크기를 설정하세요 (10-24px)",control:(0,s.jsx)("input",{type:"number",min:"10",max:"24",value:t.fontSize,onChange:N,className:n.numberInput})}),(0,s.jsx)(g,{title:"글꼴 패밀리",description:d?"폰트를 불러오는데 문제가 있습니다: ".concat(d):"앱에서 사용할 글꼴을 선택하세요",control:(0,s.jsx)("select",{value:t.fontFamily,onChange:k,className:n.select,disabled:c,children:c?(0,s.jsx)("option",{value:"",children:"폰트 목록 로딩 중..."}):(0,s.jsx)(s.Fragment,{children:[...new Set(r.map(e=>e.category))].map(e=>{let t=r.filter(t=>t.category===e);return(0,s.jsx)("optgroup",{label:{system:"시스템 폰트",korean:"한국어 폰트",japanese:"일본어 폰트",english:"영어 폰트"}[e]||e,children:t.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))},e)})})})}),(0,s.jsx)(y,{})]})]})});k.displayName="AppSettingsSection";var w=a(8886),C=a(3444),S=a(9615),I=a(2970),A=a(9531),T=a(815);function E(e){let{src:t,onCancel:a,onSave:n}=e,i=l.useRef(null),o=l.useRef(null),[r,c]=l.useState(1),[d,u]=l.useState(0),[m,x]=l.useState({x:0,y:0}),h=l.useRef({active:!1,startX:0,startY:0,origX:0,origY:0});l.useEffect(()=>{c(1),x({x:0,y:0})},[t]);let p=e=>{if(!h.current.active)return;let t=e.clientX-h.current.startX,a=e.clientY-h.current.startY;x({x:h.current.origX+t,y:h.current.origY+a})},g=()=>{h.current.active=!1,window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g)};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 w-[540px] max-w-[90vw] shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"아바타 편집"}),(0,s.jsx)("button",{className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 p-1",onClick:a,children:(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,s.jsx)("div",{className:"relative bg-slate-100 dark:bg-slate-700 rounded-xl overflow-hidden mb-6",style:{height:320},children:(0,s.jsxs)("div",{ref:i,className:"w-full h-full flex items-center justify-center relative cursor-move select-none",onMouseDown:e=>{h.current={active:!0,startX:e.clientX,startY:e.clientY,origX:m.x,origY:m.y},window.addEventListener("mousemove",p),window.addEventListener("mouseup",g)},children:[(0,s.jsx)("img",{ref:o,src:t,alt:"편집 중",style:{transform:"translate(".concat(m.x,"px, ").concat(m.y,"px) scale(").concat(r,") rotate(").concat(d,"deg)"),maxWidth:"none",userSelect:"none",pointerEvents:"none"},draggable:!1}),(0,s.jsx)("div",{className:"absolute pointer-events-none",style:{left:"50%",top:"50%",width:224,height:224,transform:"translate(-50%, -50%)",borderRadius:"50%",boxShadow:"0 0 0 9999px rgba(0,0,0,0.6)",border:"3px solid rgba(255,255,255,0.9)"}})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[(0,s.jsx)(A.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium min-w-[2rem]",children:"크기"})]}),(0,s.jsx)("input",{type:"range",min:.5,max:3,step:.05,value:r,onChange:e=>c(Number(e.target.value)),className:"flex-1 h-2 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer slider"}),(0,s.jsx)(I.A,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[(0,s.jsx)(C.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium min-w-[2rem]",children:"회전"})]}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",className:"p-2 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",onClick:()=>u(e=>(e-90)%360),title:"왼쪽으로 90\xb0 회전",children:(0,s.jsx)(C.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{type:"button",className:"p-2 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",onClick:()=>u(e=>(e+90)%360),title:"오른쪽으로 90\xb0 회전",children:(0,s.jsx)(S.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("span",{className:"text-sm text-slate-500 dark:text-slate-400 min-w-[3rem]",children:[d,"\xb0"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick:a,children:"취소"}),(0,s.jsx)("button",{className:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors",onClick:()=>{let e=document.createElement("canvas");e.width=256,e.height=256;let t=e.getContext("2d");if(!t||!o.current||!i.current)return;t.clearRect(0,0,256,256),t.save(),t.beginPath(),t.arc(128,128,128,0,2*Math.PI),t.closePath(),t.clip();let a=o.current,s=i.current.getBoundingClientRect(),l=a.naturalWidth*r,c=a.naturalHeight*r,u=s.width/2+m.x,x=s.height/2+m.y,h=256/s.width;d%360!=0&&(t.translate(128,128),t.rotate(d*Math.PI/180),t.translate(-128,-128)),t.drawImage(a,(u-l/2)*h,(x-c/2)*h,l*h,c*h),t.restore(),n(e.toDataURL("image/png"))},children:"저장"})]})]})})}let P=e=>{let{settings:t,updateSetting:a}=e,[i,o]=(0,l.useState)(t.displayName||t.username||""),[r,c]=(0,l.useState)(t.avatar||void 0),[d,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(null),p=(0,l.useRef)(null),b=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(o(t.displayName||t.username||""),t.avatar&&t.avatar.startsWith("file://")){var e;let a=t.avatar.replace(/^file:\/\//,"");null==(e=window.electronAPI.files)||e.readFileAsDataUrl(a).then(e=>{e&&e.success&&e.data?c(e.data):c(void 0)}).catch(()=>c(void 0))}else t.avatar&&(t.avatar.startsWith("loop-avatar://")||t.avatar.startsWith("data:"))?c(t.avatar):c(t.avatar||void 0)},[t]);let v=(0,l.useCallback)(e=>{let t=e.target.value;o(t),b.current&&clearTimeout(b.current),b.current=setTimeout(async()=>{try{await a("account","displayName",t||void 0),f.V.info("PROFILE_SETTINGS","Display name updated",{displayName:t})}catch(e){f.V.error("PROFILE_SETTINGS","Failed to update display name",e)}},500)},[a]);(0,l.useEffect)(()=>()=>{b.current&&clearTimeout(b.current)},[]);let j=(0,l.useCallback)(async e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){if(a.size>5242880)return void f.V.warn("PROFILE_SETTINGS","File size exceeds 5MB limit",{size:a.size,maxSize:5242880});try{let e=new FileReader;e.onload=async()=>{let t=e.result;f.V.info("PROFILE_SETTINGS","File upload detected",{fileName:a.name,fileType:a.type,dataUrlPrefix:t.substring(0,30)+"..."}),h(t);try{p.current&&(p.current.value="")}catch(e){}},e.readAsDataURL(a)}catch(e){f.V.error("PROFILE_SETTINGS","Failed to read file",e)}}},[a]),N=(i||t.username||t.email||"L").charAt(0).toUpperCase(),y=l.useCallback(async e=>{try{u(!0),await a("account","avatar",e),f.V.info("PROFILE_SETTINGS","Avatar saved from cropper")}catch(e){f.V.error("PROFILE_SETTINGS","Failed to save cropped avatar",e)}finally{u(!1),h(null)}},[a]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(m.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"사용자 프로필"})]}),(0,s.jsxs)("div",{className:n.settingItem,children:[(0,s.jsx)(g,{title:"프로필 사진",description:"파일 업로드 또는 기본 이니셜을 사용합니다 (최대 5MB, 모든 이미지 편집 가능)",control:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(T.eu,{size:"lg",src:r,fallback:N,"aria-label":"프로필 이미지",children:(0,s.jsx)("span",{className:"text-lg font-medium",children:N})}),(0,s.jsxs)("label",{className:"".concat(n.button," ").concat(n.secondaryButton," ").concat(d?"opacity-50 cursor-not-allowed":""),children:[(0,s.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:j,className:"hidden",disabled:d}),(0,s.jsx)(w.A,{className:"w-4 h-4 mr-2 inline"}),d?"업로드 중...":"업로드"]})]})}),(0,s.jsx)(g,{title:"이름(별명)",description:"앱에 표시될 이름을 입력하세요 (변경 시 자동 저장)",control:(0,s.jsx)("input",{type:"text",value:i,onChange:v,className:n.textInput,placeholder:"표시될 이름을 입력하세요"})})]}),x&&(0,s.jsx)(E,{src:x,onCancel:()=>h(null),onSave:y})]})},F=l.memo(e=>{let{settings:t,updateSetting:a}=e,i=(0,l.useCallback)(e=>{a("keyboard","enabled",e)},[a]),o=(0,l.useCallback)(e=>{a("keyboard","trackAllApps",e)},[a]),r=(0,l.useCallback)(e=>{a("keyboard","language",e.target.value)},[a]),d=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);t>=5&&t<=120&&a("keyboard","sessionTimeout",t)},[a]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(c.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"키보드 설정"})]}),(0,s.jsxs)("div",{className:n.settingItem,children:[(0,s.jsx)(g,{title:"키보드 모니터링 활성화",description:"키보드 입력을 모니터링하여 타이핑 통계를 수집합니다",control:(0,s.jsx)(b,{checked:t.enabled,onChange:i})}),(0,s.jsx)(g,{title:"입력 언어",description:"주로 사용하는 입력 언어를 선택하세요",control:(0,s.jsxs)("select",{value:t.language,onChange:r,className:n.select,disabled:!t.enabled,children:[(0,s.jsx)("option",{value:"korean",children:"한국어"}),(0,s.jsx)("option",{value:"english",children:"English"}),(0,s.jsx)("option",{value:"japanese",children:"日本語"}),(0,s.jsx)("option",{value:"chinese",children:"中文"})]})}),(0,s.jsx)(g,{title:"모든 앱 추적",description:"모든 애플리케이션에서의 타이핑을 추적합니다",control:(0,s.jsx)(b,{checked:t.trackAllApps,onChange:o,disabled:!t.enabled})}),(0,s.jsx)(g,{title:"세션 타임아웃",description:"타이핑 세션이 종료되는 시간(분)을 설정하세요 (5-120분)",control:(0,s.jsx)("input",{type:"number",min:"5",max:"120",value:t.sessionTimeout,onChange:d,className:n.numberInput,disabled:!t.enabled})})]})]})});F.displayName="KeyboardSettingsSection";let _=l.memo(e=>{let{settings:t,updateSetting:a}=e,i=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);t>=800&&t<=2560&&a("ui","windowWidth",t)},[a]),o=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);t>=600&&t<=1440&&a("ui","windowHeight",t)},[a]),r=(0,l.useCallback)(e=>{a("ui","sidebarCollapsed",e)},[a]),c=(0,l.useCallback)(e=>{a("ui","focusMode",e)},[a]),u=(0,l.useCallback)(e=>{a("ui","showLineNumbers",e)},[a]),m=(0,l.useCallback)(e=>{a("ui","showWordCount",e)},[a]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(d.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"UI/UX 설정"})]}),(0,s.jsxs)("div",{className:n.settingItem,children:[(0,s.jsx)(g,{title:"창 너비",description:"앱 창의 기본 너비를 설정하세요 (800-2560px)",control:(0,s.jsx)("input",{type:"number",min:"800",max:"2560",step:"50",value:t.windowWidth,onChange:i,className:n.numberInput})}),(0,s.jsx)(g,{title:"창 높이",description:"앱 창의 기본 높이를 설정하세요 (600-1440px)",control:(0,s.jsx)("input",{type:"number",min:"600",max:"1440",step:"50",value:t.windowHeight,onChange:o,className:n.numberInput})}),(0,s.jsx)(g,{title:"사이드바 접기",description:"앱 시작 시 사이드바를 접힌 상태로 표시합니다",control:(0,s.jsx)(b,{checked:t.sidebarCollapsed,onChange:r})}),(0,s.jsx)(g,{title:"집중 모드",description:"집중 모드에서는 불필요한 UI 요소를 숨깁니다",control:(0,s.jsx)(b,{checked:t.focusMode,onChange:c})}),(0,s.jsx)(g,{title:"줄 번호 표시",description:"에디터에서 줄 번호를 표시합니다",control:(0,s.jsx)(b,{checked:t.showLineNumbers,onChange:u})}),(0,s.jsx)(g,{title:"단어 수 표시",description:"상태바에 단어 수를 표시합니다",control:(0,s.jsx)(b,{checked:t.showWordCount,onChange:m})})]})]})});_.displayName="UISettingsSection";let G=l.memo(e=>{let{settings:t,updateSetting:a}=e,i=(0,l.useCallback)(e=>{a("notifications","enableNotifications",e)},[a]),r=(0,l.useCallback)(e=>{a("notifications","enableSounds",e)},[a]),c=(0,l.useCallback)(e=>{a("notifications","notifyGoalAchieved",e)},[a]),d=(0,l.useCallback)(e=>{a("notifications","notifyDailyGoal",e)},[a]),u=(0,l.useCallback)(e=>{a("notifications","notifyErrors",e)},[a]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(o.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"알림 설정"})]}),(0,s.jsxs)("div",{className:n.settingItem,children:[(0,s.jsx)(g,{title:"알림 활성화",description:"시스템 알림을 받아보실 수 있습니다",control:(0,s.jsx)(b,{checked:t.enableNotifications,onChange:i})}),(0,s.jsx)(g,{title:"알림 사운드",description:"알림 시 사운드를 재생합니다",control:(0,s.jsx)(b,{checked:t.enableSounds,onChange:r,disabled:!t.enableNotifications})}),(0,s.jsx)(g,{title:"목표 달성 알림",description:"설정한 목표를 달성했을 때 알림을 받습니다",control:(0,s.jsx)(b,{checked:t.notifyGoalAchieved,onChange:c,disabled:!t.enableNotifications})}),(0,s.jsx)(g,{title:"일일 목표 알림",description:"매일 설정된 목표에 대한 진행상황을 알림으로 받습니다",control:(0,s.jsx)(b,{checked:t.notifyDailyGoal,onChange:d,disabled:!t.enableNotifications})}),(0,s.jsx)(g,{title:"에러 알림",description:"시스템 오류나 문제가 발생했을 때 알림을 받습니다",control:(0,s.jsx)(b,{checked:t.notifyErrors,onChange:u,disabled:!t.enableNotifications})})]})]})});G.displayName="NotificationSettingsSection";let L=l.memo(e=>{let{settings:t,updateSetting:a}=e,i=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);t>=20&&t<=100&&a("performance","maxCPUUsage",t)},[a]),o=(0,l.useCallback)(e=>{let t=parseInt(e.target.value,10);t>=512&&t<=8192&&a("performance","maxMemoryUsage",t)},[a]),c=(0,l.useCallback)(e=>{a("performance","enableGPUAcceleration",e)},[a]),d=(0,l.useCallback)(e=>{a("performance","enableHardwareAcceleration",e)},[a]);return(0,s.jsxs)("div",{className:n.sectionCard,children:[(0,s.jsxs)("div",{className:n.sectionHeader,children:[(0,s.jsx)(r.A,{className:n.sectionIcon}),(0,s.jsx)("h2",{className:n.sectionTitle,children:"성능 설정"})]}),(0,s.jsxs)("div",{className:n.settingItem,children:[(0,s.jsx)(g,{title:"GPU 가속 활성화",description:"GPU를 사용하여 렌더링 성능을 향상시킵니다",control:(0,s.jsx)(b,{checked:t.enableGPUAcceleration,onChange:c})}),(0,s.jsx)(g,{title:"하드웨어 가속 활성화",description:"하드웨어 가속을 사용하여 전반적인 성능을 향상시킵니다",control:(0,s.jsx)(b,{checked:t.enableHardwareAcceleration,onChange:d})}),(0,s.jsx)(g,{title:"최대 CPU 사용률",description:"앱이 사용할 수 있는 최대 CPU 사용률(%)을 설정하세요 (20-100%)",control:(0,s.jsx)("input",{type:"number",min:"20",max:"100",step:"5",value:t.maxCPUUsage,onChange:i,className:n.numberInput})}),(0,s.jsx)(g,{title:"최대 메모리 사용량",description:"앱이 사용할 수 있는 최대 메모리 사용량(MB)을 설정하세요 (512-8192MB)",control:(0,s.jsx)("input",{type:"number",min:"512",max:"8192",step:"256",value:t.maxMemoryUsage,onChange:o,className:n.numberInput})})]})]})});L.displayName="PerformanceSettingsSection";var M=a(2935);let D=l.memo(e=>{let{saving:t,onSave:a,onReset:i}=e,o=(0,l.useCallback)(async()=>{try{await a()}catch(e){console.error("Failed to save settings:",e)}},[a]),r=(0,l.useCallback)(async()=>{if(window.confirm("모든 설정을 기본값으로 초기화하시겠습니까?\n이 작업은 되돌릴 수 없습니다."))try{await i()}catch(e){console.error("Failed to reset settings:",e)}},[i]);return(0,s.jsxs)("div",{className:n.actions,children:[(0,s.jsxs)("button",{type:"button",className:"".concat(n.button," ").concat(n.secondaryButton),onClick:r,disabled:t,children:[(0,s.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"기본값으로 복원"]}),(0,s.jsxs)("button",{type:"button",className:"".concat(n.button," ").concat(n.primaryButton),onClick:o,disabled:t,children:[(0,s.jsx)(M.A,{className:"w-4 h-4 mr-2"}),t?"저장 중...":"모든 설정 저장"]})]})});function U(){let{settings:e,loading:t,saving:a,updateSetting:o,saveAllSettings:r,resetSettings:c}=(0,i.t)(),[d,u]=(0,l.useState)("app"),{setTheme:m}=(0,v.D)();return t||!e?(0,s.jsx)("div",{className:n.container,children:(0,s.jsx)("div",{className:n.loading,children:(0,s.jsxs)("div",{className:n.loadingContent,children:[(0,s.jsx)("div",{className:n.spinner}),(0,s.jsx)("p",{className:n.loadingText,children:"설정을 불러오는 중..."})]})})}):(0,s.jsxs)("div",{className:"".concat(n.container," min-w-0"),children:[(0,s.jsx)("h1",{className:n.pageTitle,children:"설정"}),(0,s.jsx)(p,{activeSection:d,onSectionChange:u}),(0,s.jsxs)("div",{className:"".concat(n.section," min-w-0"),children:["app"===d&&(0,s.jsx)(k,{settings:e.app,updateSetting:o,setTheme:m}),"account"===d&&(0,s.jsx)(P,{settings:e.account,updateSetting:o}),"notifications"===d&&(0,s.jsx)(G,{settings:e.notifications,updateSetting:o}),"ui"===d&&(0,s.jsx)(_,{settings:e.ui,updateSetting:o}),"keyboard"===d&&(0,s.jsx)(F,{settings:e.keyboard,updateSetting:o}),"performance"===d&&(0,s.jsx)(L,{settings:e.performance,updateSetting:o})]}),(0,s.jsx)(D,{saving:a,onSave:r,onReset:c})]})}D.displayName="SettingsActions"}},e=>{var t=t=>e(e.s=t);e.O(0,[209,432,979,899,744,322,592,940,605,30,465,173,641,431,110,555,408,219,27,206,409,76,358],()=>t(5292)),_N_E=e.O()}]);