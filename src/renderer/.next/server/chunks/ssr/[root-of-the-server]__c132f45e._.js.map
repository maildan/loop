{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/shared/logger.ts"],"sourcesContent":["// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ë¡œê±° ì‹œìŠ¤í…œ\nexport enum LogLevel {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n}\n\nexport interface LogEntry {\n  level: LogLevel;\n  component: string;\n  message: string;\n  data?: unknown;\n  timestamp: Date;\n}\n\nclass LoggerService {\n  private logLevel: LogLevel = LogLevel.DEBUG; // ğŸ”¥ ê°•ì œë¡œ DEBUG ë ˆë²¨ í™œì„±í™”\n  private logs: LogEntry[] = [];\n  private maxLogs = 1000;\n  private timers: Map<string, number> = new Map();\n\n  constructor() {\n    // ğŸ”¥ í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ë¡œê·¸ ë ˆë²¨ ì„¤ì •\n    const envLogLevel = process.env.LOG_LEVEL?.toLowerCase();\n    const debugMode = process.env.DEBUG === 'true' || process.env.NODE_ENV === 'development';\n    \n    if (debugMode || envLogLevel === 'debug') {\n      this.logLevel = LogLevel.DEBUG;\n    } else if (envLogLevel === 'info') {\n      this.logLevel = LogLevel.INFO;\n    } else if (envLogLevel === 'warn') {\n      this.logLevel = LogLevel.WARN;\n    } else if (envLogLevel === 'error') {\n      this.logLevel = LogLevel.ERROR;\n    } else {\n      // ğŸ”¥ ê¸°ë³¸ê°’: DEBUG ë ˆë²¨\n      this.logLevel = LogLevel.DEBUG;\n    }\n    \n    console.log(`ğŸ”¥ [LOGGER] Logger initialized - Level: ${LogLevel[this.logLevel]}, ENV: ${process.env.NODE_ENV}, DEBUG: ${process.env.DEBUG}`);\n  }\n\n  setLogLevel(level: LogLevel): void {\n    this.logLevel = level;\n  }\n\n  private log(level: LogLevel, component: string, message: string, data?: unknown): void {\n    if (level < this.logLevel) return;\n\n    const entry: LogEntry = {\n      level,\n      component,\n      message,\n      data,\n      timestamp: new Date(),\n    };\n\n    this.logs.push(entry);\n    \n    // ë¡œê·¸ ê°œìˆ˜ ì œí•œ\n    if (this.logs.length > this.maxLogs) {\n      this.logs.shift();\n    }\n\n    // ğŸ”¥ ì½˜ì†” ì¶œë ¥ - í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ + ê°•ì œ ì¶œë ¥ ëª¨ë“œ\n    const timestamp = entry.timestamp.toISOString();\n    const levelName = LogLevel[level];\n    const prefix = `[${timestamp}] ${levelName} [${component}]`;\n    const verboseMode = process.env.VERBOSE_LOGGING === 'true';\n\n    // ğŸ”¥ ê°•ì œ ì¶œë ¥: DEBUG ë ˆë²¨ë„ í•­ìƒ í‘œì‹œ\n    const shouldForceOutput = process.env.DEBUG === 'true' || process.env.NODE_ENV === 'development';\n\n    if (level >= this.logLevel || shouldForceOutput) {\n      switch (level) {\n        case LogLevel.DEBUG:\n          console.debug(`ğŸ” ${prefix}`, message, verboseMode && data ? data : '');\n          break;\n        case LogLevel.INFO:\n          console.info(`â„¹ï¸ ${prefix}`, message, verboseMode && data ? data : '');\n          break;\n        case LogLevel.WARN:\n          console.warn(`âš ï¸ ${prefix}`, message, verboseMode && data ? data : '');\n          break;\n        case LogLevel.ERROR:\n          console.error(`âŒ ${prefix}`, message, data || '');\n          break;\n      }\n    }\n  }\n\n  debug(component: string, message: string, data?: unknown): void {\n    this.log(LogLevel.DEBUG, component, message, data);\n  }\n\n  info(component: string, message: string, data?: unknown): void {\n    this.log(LogLevel.INFO, component, message, data);\n  }\n\n  warn(component: string, message: string, data?: unknown): void {\n    this.log(LogLevel.WARN, component, message, data);\n  }\n\n  error(component: string, message: string, data?: unknown): void {\n    this.log(LogLevel.ERROR, component, message, data);\n  }\n\n  getLogs(): LogEntry[] {\n    return [...this.logs];\n  }\n\n  clearLogs(): void {\n    this.logs = [];\n  }\n\n  getLogsByComponent(component: string): LogEntry[] {\n    return this.logs.filter(log => log.component === component);\n  }\n\n  getLogsByLevel(level: LogLevel): LogEntry[] {\n    return this.logs.filter(log => log.level >= level);\n  }\n\n  // ğŸ”¥ Timer ê¸°ëŠ¥\n  time(label: string): void {\n    this.timers.set(label, performance.now());\n    this.debug('TIMER', `Timer started: ${label}`);\n  }\n\n  timeEnd(label: string): void {\n    const startTime = this.timers.get(label);\n    if (startTime === undefined) {\n      this.warn('TIMER', `Timer not found: ${label}`);\n      return;\n    }\n    \n    const duration = performance.now() - startTime;\n    this.timers.delete(label);\n    this.info('TIMER', `Timer completed: ${label}`, { duration: `${duration.toFixed(3)}ms` });\n  }\n}\n\nexport const Logger = new LoggerService();\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n/**\n * ğŸ”¥ ê¸°ê°€ì°¨ë“œ ìœ í‹¸ë¦¬í‹°: Tailwind í´ë˜ìŠ¤ ë³‘í•©\n * clsxì™€ tailwind-mergeë¥¼ ê²°í•©í•˜ì—¬ ì¡°ê±´ë¶€ í´ë˜ìŠ¤ì™€ ì¤‘ë³µ ì œê±°ë¥¼ ë™ì‹œì— ì²˜ë¦¬\n */\nexport function cn(...inputs: ClassValue[]): string {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * ğŸ”¥ ê¸°ê°€ì°¨ë“œ ìœ í‹¸ë¦¬í‹°: íƒ€ì… ì•ˆì „í•œ í‚¤ ì¶”ì¶œ\n */\nexport function getObjectKeys<T extends Record<string, unknown>>(obj: T): Array<keyof T> {\n  return Object.keys(obj) as Array<keyof T>;\n}\n\n/**\n * ğŸ”¥ ê¸°ê°€ì°¨ë“œ ìœ í‹¸ë¦¬í‹°: ë”œë ˆì´ í•¨ìˆ˜\n */\nexport function delay(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * ğŸ”¥ ê¸°ê°€ì°¨ë“œ ìœ í‹¸ë¦¬í‹°: ë””ë°”ìš´ìŠ¤\n */\nexport function debounce<T extends unknown[]>(\n  func: (...args: T) => void,\n  waitMs: number\n): (...args: T) => void {\n  let timeoutId: NodeJS.Timeout | null = null;\n  \n  return (...args: T): void => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    \n    timeoutId = setTimeout(() => {\n      func(...args);\n    }, waitMs);\n  };\n}\n\n/**\n * ğŸ”¥ ê¸°ê°€ì°¨ë“œ ìœ í‹¸ë¦¬í‹°: í¬ë§·íŒ…\n */\nexport function formatNumber(num: number): string {\n  return new Intl.NumberFormat('ko-KR').format(num);\n}\n\nexport function formatDate(date: Date): string {\n  return new Intl.DateTimeFormat('ko-KR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  }).format(date);\n}\n\n/**\n * ğŸ”¥ ê¸°ê°€ì°¨ë“œ ìœ í‹¸ë¦¬í‹°: íƒ€ì… ê°€ë“œ\n */\nexport function isString(value: unknown): value is string {\n  return typeof value === 'string';\n}\n\nexport function isNumber(value: unknown): value is number {\n  return typeof value === 'number' && !isNaN(value);\n}\n\nexport function isArray<T>(value: unknown): value is T[] {\n  return Array.isArray(value);\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;AAMO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB;AAKO,SAAS,cAAiD,GAAM;IACrE,OAAO,OAAO,IAAI,CAAC;AACrB;AAKO,SAAS,MAAM,EAAU;IAC9B,OAAO,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;AACpD;AAKO,SAAS,SACd,IAA0B,EAC1B,MAAc;IAEd,IAAI,YAAmC;IAEvC,OAAO,CAAC,GAAG;QACT,IAAI,WAAW;YACb,aAAa;QACf;QAEA,YAAY,WAAW;YACrB,QAAQ;QACV,GAAG;IACL;AACF;AAKO,SAAS,aAAa,GAAW;IACtC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC;AAC/C;AAEO,SAAS,WAAW,IAAU;IACnC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP,GAAG,MAAM,CAAC;AACZ;AAKO,SAAS,SAAS,KAAc;IACrC,OAAO,OAAO,UAAU;AAC1B;AAEO,SAAS,SAAS,KAAc;IACrC,OAAO,OAAO,UAAU,YAAY,CAAC,MAAM;AAC7C;AAEO,SAAS,QAAW,KAAc;IACvC,OAAO,MAAM,OAAO,CAAC;AACvB","debugId":null}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/ui/Button.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef, ButtonHTMLAttributes, ReactNode } from 'react';\nimport { cn } from '../../lib/utils';\nimport { Loader2 } from 'lucide-react';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜ - ì‘ê°€ ì¹œí™”ì  ë‹¤í¬ëª¨ë“œ\nconst BUTTON_STYLES = {\n  base: 'inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none',\n  variants: {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-400',\n    secondary: 'bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 dark:focus:ring-slate-400',\n    outline: 'border border-slate-300 bg-transparent text-slate-700 hover:bg-slate-50 focus:ring-slate-500 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800 dark:focus:ring-slate-400',\n    ghost: 'text-slate-700 hover:bg-slate-100 focus:ring-slate-500 dark:text-slate-300 dark:hover:bg-slate-800 dark:focus:ring-slate-400',\n    destructive: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-400'\n  },\n  sizes: {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-sm',\n    lg: 'px-6 py-3 text-base',\n    icon: 'p-2'\n  }\n} as const;\n\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  readonly variant?: keyof typeof BUTTON_STYLES.variants;\n  readonly size?: keyof typeof BUTTON_STYLES.sizes;\n  readonly loading?: boolean;\n  readonly loadingText?: string;\n  readonly children: ReactNode;\n  readonly 'aria-label'?: string;\n}\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: forwardRefì™€ ëª…ì‹œì  íƒ€ì…\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ \n    variant = 'primary', \n    size = 'md',\n    loading = false,\n    loadingText,\n    disabled,\n    className,\n    children,\n    'aria-label': ariaLabel,\n    ...props \n  }, ref) => {\n    \n    const isDisabled = disabled || loading;\n    \n    const buttonClassName = cn(\n      BUTTON_STYLES.base,\n      BUTTON_STYLES.variants[variant],\n      BUTTON_STYLES.sizes[size],\n      className\n    );\n\n    return (\n      <button\n        ref={ref}\n        className={buttonClassName}\n        disabled={isDisabled}\n        aria-label={ariaLabel}\n        aria-disabled={isDisabled}\n        onClick={(e) => {\n          if (isDisabled) { e.preventDefault(); e.stopPropagation(); return; }\n          props.onClick?.(e);\n        }}\n        {...props}\n      >\n        {loading && (\n          <Loader2 \n            className=\"w-4 h-4 mr-2 animate-spin\" \n            aria-hidden=\"true\"\n          />\n        )}\n        {loading && loadingText ? loadingText : children}\n      </button>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,0CAA0C;AAC1C,MAAM,gBAAgB;IACpB,MAAM;IACN,UAAU;QACR,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;QACP,aAAa;IACf;IACA,OAAO;QACL,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,MAAM;IACR;AACF;AAYO,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAC7B,CAAC,EACC,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,UAAU,KAAK,EACf,WAAW,EACX,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,cAAc,SAAS,EACvB,GAAG,OACJ,EAAE;IAED,MAAM,aAAa,YAAY;IAE/B,MAAM,kBAAkB,CAAA,GAAA,+HAAA,CAAA,KAAE,AAAD,EACvB,cAAc,IAAI,EAClB,cAAc,QAAQ,CAAC,QAAQ,EAC/B,cAAc,KAAK,CAAC,KAAK,EACzB;IAGF,qBACE,8OAAC;QACC,KAAK;QACL,WAAW;QACX,UAAU;QACV,cAAY;QACZ,iBAAe;QACf,SAAS,CAAC;YACR,IAAI,YAAY;gBAAE,EAAE,cAAc;gBAAI,EAAE,eAAe;gBAAI;YAAQ;YACnE,MAAM,OAAO,GAAG;QAClB;QACC,GAAG,KAAK;;YAER,yBACC,8OAAC,iNAAA,CAAA,UAAO;gBACN,WAAU;gBACV,eAAY;;;;;;YAGf,WAAW,cAAc,cAAc;;;;;;;AAG9C;AAGF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/auth/LoginModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport { Button } from '../ui/Button';\n\nexport default function LoginModal({ open, onClose, onLogin }: { open: boolean; onClose: () => void; onLogin: () => Promise<void> }) {\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-label=\"Google ì¬ë¡œê·¸ì¸ í•„ìš”\"\n        className=\"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 w-full max-w-md mx-4\"\n      >\n        <h3 className=\"text-lg font-semibold mb-2 text-slate-900 dark:text-slate-100\">Google ì¬ë¡œê·¸ì¸ í•„ìš”</h3>\n        <p className=\"mb-4 text-sm text-slate-600 dark:text-slate-400\">Google ì¸ì¦ì´ ë§Œë£Œë˜ì—ˆê±°ë‚˜ ì—°ê²°ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ë ¤ë©´ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.</p>\n\n        <div className=\"flex justify-end gap-2\">\n          <Button variant=\"ghost\" onClick={onClose}>ì·¨ì†Œ</Button>\n          <Button onClick={async () => { await onLogin(); onClose(); }}>Googleë¡œ ë¡œê·¸ì¸</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAKe,SAAS,WAAW,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAwE;IACjI,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,MAAK;YACL,cAAW;YACX,cAAW;YACX,WAAU;;8BAEV,8OAAC;oBAAG,WAAU;8BAAgE;;;;;;8BAC9E,8OAAC;oBAAE,WAAU;8BAAkD;;;;;;8BAE/D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,8IAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,SAAS;sCAAS;;;;;;sCAC1C,8OAAC,8IAAA,CAAA,SAAM;4BAAC,SAAS;gCAAc,MAAM;gCAAW;4BAAW;sCAAG;;;;;;;;;;;;;;;;;;;;;;;AAKxE","debugId":null}},
    {"offset": {"line": 371, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react';\nimport { Logger } from '../../shared/logger';\n\nexport interface AuthState {\n    isAuthenticated: boolean;\n    userEmail?: string;\n    userName?: string;\n    userPicture?: string;\n}\n\nexport interface AuthContextType {\n    auth: AuthState;\n    loadAuthStatus: () => Promise<void>;\n    setAuth: (next: Partial<AuthState>) => void;\n    clearAuth: () => void;\n}\n\n// Extended context type with loaded flag\nexport interface AuthContextTypeEx extends AuthContextType {\n    loaded: boolean;\n}\n\nconst getDefaultAuth = (): AuthState => ({ isAuthenticated: false });\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children, initialAuth }: { children: React.ReactNode; initialAuth?: any }) {\n    const [auth, setAuthState] = useState<AuthState>(() => {\n        if (initialAuth && initialAuth.isAuthenticated) {\n            return {\n                isAuthenticated: true,\n                userEmail: initialAuth.userEmail || undefined,\n                userName: initialAuth.userName || undefined,\n                userPicture: initialAuth.userPicture || undefined,\n            } as AuthState;\n        }\n        return getDefaultAuth();\n    });\n    const [loaded, setLoaded] = useState<boolean>(() => !!(initialAuth));\n    const [loginModalOpen, setLoginModalOpen] = useState<boolean>(false);\n    const latestLoadId = React.useRef(0);\n\n    const setAuth = useCallback((next: Partial<AuthState>) => {\n        setAuthState(prev => ({ ...prev, ...next }));\n    }, []);\n\n    const clearAuth = useCallback(() => {\n        setAuthState(getDefaultAuth());\n    }, []);\n\n    const loadAuthStatus = useCallback(async (): Promise<void> => {\n        const requestId = ++latestLoadId.current;\n        try {\n            if (typeof window === 'undefined' || !window.electronAPI?.oauth?.getAuthStatus) return;\n            const res = await window.electronAPI.oauth.getAuthStatus();\n            // ignore stale responses\n            if (requestId !== latestLoadId.current) return;\n\n            if (res && res.success && res.data && res.data.isAuthenticated) {\n                const email = res.data.userEmail;\n                const picture = res.data.userPicture || (email ? `https://ui-avatars.com/api/?name=${encodeURIComponent(email)}&background=4f46e5&color=fff&size=64` : undefined);\n                setAuthState({\n                    isAuthenticated: true,\n                    userEmail: email,\n                    userName: email ? email.split('@')[0] : res.data.userName || 'Google ì‚¬ìš©ì',\n                    userPicture: picture,\n                });\n                Logger.info('AUTH_CONTEXT', 'Auth status loaded', { userEmail: email });\n            } else {\n                setAuthState(getDefaultAuth());\n            }\n        } catch (error) {\n            // ignore stale errors\n            if (requestId !== latestLoadId.current) return;\n            Logger.error('AUTH_CONTEXT', 'Failed to load auth status', error);\n            setAuthState(getDefaultAuth());\n        }\n        finally {\n            // mark loaded regardless of result (so UI can update safely)\n            if (requestId === latestLoadId.current) setLoaded(true);\n        }\n    }, []);\n\n    useEffect(() => {\n        // seed auth state from preload async snapshot to reduce flicker\n        (async () => {\n            try {\n                // Try synchronous preload snapshot first to avoid waiting\n                if (typeof window !== 'undefined' && (window as any).loopSnapshot && typeof (window as any).loopSnapshot.get === 'function') {\n                    try {\n                        const snap = (window as any).loopSnapshot.get();\n                        if (snap && snap.auth && snap.auth.isAuthenticated) {\n                            setAuthState({\n                                isAuthenticated: true,\n                                userEmail: snap.auth.userEmail || undefined,\n                                userName: snap.auth.userName || undefined,\n                                userPicture: snap.auth.userPicture || undefined,\n                            });\n                            setLoaded(true);\n                        }\n                    } catch (e) {\n                        // ignore sync preload errors\n                    }\n                }\n\n                // fallback: async snapshot via electronAPI\n                if (typeof window !== 'undefined' && (window as any).electronAPI?.loopSnapshot?.getAsync) {\n                    const snap = await (window as any).electronAPI.loopSnapshot.getAsync();\n                    if (snap && snap.auth && snap.auth.isAuthenticated) {\n                        setAuthState({\n                            isAuthenticated: true,\n                            userEmail: snap.auth.userEmail || undefined,\n                            userName: snap.auth.userName || undefined,\n                            userPicture: snap.auth.userPicture || undefined,\n                        });\n                        setLoaded(true);\n                    }\n                }\n            } catch (e) {\n                // ignore\n            } finally {\n                // validate/refresh tokens after seeding\n                loadAuthStatus();\n            }\n        })();\n\n        if (typeof window !== 'undefined' && window.electronAPI?.on) {\n            const handler = (payload?: any) => {\n                Logger.info('AUTH_CONTEXT', 'auth-status-changed event received', payload);\n                // If the payload contains user data, update state immediately to improve UX\n                try {\n                    if (payload && payload.userEmail) {\n                        setAuthState((prev) => ({\n                            ...prev,\n                            isAuthenticated: true,\n                            userEmail: payload.userEmail || prev.userEmail,\n                            userName: payload.userName || prev.userName,\n                            userPicture: payload.userPicture || prev.userPicture,\n                        }));\n                        setLoaded(true);\n                        return;\n                    }\n                } catch (e) {\n                    // continue to fallback\n                }\n                loadAuthStatus();\n            };\n            window.electronAPI.on('auth-status-changed', handler);\n            window.electronAPI.on('oauth-success', handler);\n            const loginRequiredHandler = () => {\n                Logger.info('AUTH_CONTEXT', 'oauth:login-required received - clearing auth and notifying user');\n                clearAuth();\n                try {\n                    window.electronAPI.notifications.show('ë¡œê·¸ì¸ í•„ìš”', 'Google ì¸ì¦ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');\n                } catch (e) {\n                    // ignore\n                }\n                // open modal to prompt user\n                setLoginModalOpen(true);\n            };\n            window.electronAPI.on('oauth:login-required', loginRequiredHandler);\n            return () => {\n                window.electronAPI?.removeListener('auth-status-changed', handler);\n                window.electronAPI?.removeListener('oauth-success', handler);\n                window.electronAPI?.removeListener('oauth:login-required', loginRequiredHandler);\n            };\n        }\n    }, [loadAuthStatus]);\n\n    const ctx = useMemo(() => ({ auth, loadAuthStatus, setAuth, clearAuth, loaded }), [auth, loadAuthStatus, setAuth, clearAuth, loaded]);\n\n    // lazy load LoginModal to avoid SSR issues\n    const LoginModal = require('../components/auth/LoginModal').default;\n\n    return (\n        <AuthContext.Provider value={ctx as unknown as AuthContextType}>\n            {children}\n            <LoginModal open={loginModalOpen} onClose={() => setLoginModalOpen(false)} onLogin={async () => {\n                try {\n                    await window.electronAPI.oauth.startGoogleAuth();\n                } catch (e) {\n                    Logger.error('AUTH_CONTEXT', 'Failed to start google auth from modal', e);\n                }\n            }} />\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth(): AuthContextType {\n    const ctx = useContext(AuthContext);\n    if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n    return ctx;\n}\n\nexport default AuthContext;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/app/settings/hooks/useSettings.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { Logger } from '../../../../shared/logger';\nimport type { SettingsData, UseSettingsReturn } from '../types';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ useSettings í›… - Electron-Store ì™„ë²½ í˜¸í™˜!\n\n/**\n * ğŸ”¥ Settings ê´€ë¦¬ë¥¼ ìœ„í•œ ì»¤ìŠ¤í…€ í›…\n * - main/settings/ElectronStoreSettingsManagerì™€ ì™„ë²½ í˜¸í™˜\n * - IPC í†µì‹ ì„ í†µí•œ ì„¤ì • ê´€ë¦¬\n * - íƒ€ì… ì•ˆì „í•œ ì„¤ì • ì—…ë°ì´íŠ¸\n * - ì„±ëŠ¥ ìµœì í™”ëœ ìƒíƒœ ê´€ë¦¬\n */\nexport function useSettings(): UseSettingsReturn {\n  const [settings, setSettings] = useState<SettingsData | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // ğŸ”¥ ì¤‘ë³µ ìš”ì²­ ë°©ì§€ë¥¼ ìœ„í•œ ref\n  const loadingRef = useRef<boolean>(false);\n  const savingRef = useRef<boolean>(false);\n\n  /**\n   * ğŸ”¥ CSS ë³€ìˆ˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (í°íŠ¸ ì„¤ì •)\n   */\n  const updateCSSVariables = useCallback(() => {\n    if (!settings) return;\n\n    const root = document.documentElement;\n    root.style.setProperty('--app-font-size', `${settings.app.fontSize}px`);\n    root.style.setProperty('--app-font-family', settings.app.fontFamily);\n\n    Logger.debug('USE_SETTINGS', 'CSS variables updated', {\n      fontSize: settings.app.fontSize,\n      fontFamily: settings.app.fontFamily\n    });\n  }, [settings]);\n\n  /**\n   * ğŸ”¥ ê¸°ë³¸ê°’ ì •ì˜ (main/settingsì™€ ë™ì¼)\n   */\n  const defaultSettings: SettingsData = {\n    app: {\n      theme: 'system',\n      language: 'ko',\n      autoSave: true,\n      startMinimized: false,\n      minimizeToTray: true,\n      fontSize: 14,\n      fontFamily: 'Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif',\n    },\n    keyboard: {\n      enabled: true,\n      language: 'korean',\n      trackAllApps: false,\n      sessionTimeout: 30,\n    },\n    ui: {\n      windowWidth: 1400,\n      windowHeight: 900,\n      sidebarCollapsed: false,\n      focusMode: false,\n      showLineNumbers: true,\n      showWordCount: true,\n    },\n    performance: {\n      enableGPUAcceleration: true,\n      maxCPUUsage: 80,\n      maxMemoryUsage: 2048,\n      enableHardwareAcceleration: true,\n    },\n    account: {\n      userId: undefined,\n      username: undefined,\n      email: undefined,\n      displayName: undefined,\n      avatar: undefined,\n      enableSync: false,\n      syncProvider: 'local',\n      syncInterval: 60,\n      enableTwoFactor: false,\n      authProvider: 'local',\n      sessionTimeout: 60,\n    },\n    notifications: {\n      enableNotifications: true,\n      enableSounds: true,\n      notifyGoalAchieved: true,\n      notifyDailyGoal: true,\n      notifyErrors: true,\n    },\n  };\n\n  /**\n   * ğŸ”¥ ì„¤ì • ë¡œë“œ (ì¤‘ë³µ ë°©ì§€)\n   */\n  const loadSettings = useCallback(async (): Promise<void> => {\n    if (loadingRef.current) return;\n\n    try {\n      loadingRef.current = true;\n      setLoading(true);\n      setError(null);\n\n      Logger.debug('USE_SETTINGS', 'Loading settings from main process');\n\n      const result = await window.electronAPI.settings.getAll();\n\n      if (result && result.success && result.data) {\n        // electron-store returns partial/full settings object; merge with defaults\n        const loaded = result.data as Partial<SettingsData>;\n        const merged: SettingsData = {\n          ...defaultSettings,\n          ...loaded,\n          app: { ...defaultSettings.app, ...(loaded.app || {}) },\n          keyboard: { ...defaultSettings.keyboard, ...(loaded.keyboard || {}) },\n          ui: { ...defaultSettings.ui, ...(loaded.ui || {}) },\n          performance: { ...defaultSettings.performance, ...(loaded.performance || {}) },\n          account: { ...defaultSettings.account, ...(loaded.account || {}) },\n          notifications: { ...defaultSettings.notifications, ...(loaded.notifications || {}) },\n        } as SettingsData;\n\n        setSettings(merged);\n\n        // ğŸ”¥ í°íŠ¸ ì„¤ì • CSS ë³€ìˆ˜ ì—…ë°ì´íŠ¸ (ì¦‰ì‹œ ì ìš©)\n        setTimeout(() => {\n          const root = document.documentElement;\n          root.style.setProperty('--app-font-size', `${merged.app.fontSize}px`);\n          root.style.setProperty('--app-font-family', merged.app.fontFamily);\n          Logger.debug('USE_SETTINGS', 'Initial CSS font variables applied', {\n            fontSize: merged.app.fontSize,\n            fontFamily: merged.app.fontFamily\n          });\n        }, 0);\n\n        Logger.info('USE_SETTINGS', 'Settings loaded successfully', result.data);\n      } else {\n        Logger.warn('USE_SETTINGS', 'Failed to load settings, using defaults', result?.error);\n        setSettings(defaultSettings);\n        setError('ê¸°ë³¸ ì„¤ì •ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.');\n      }\n    } catch (error) {\n      Logger.error('USE_SETTINGS', 'Error loading settings', error);\n      setSettings(defaultSettings);\n      setError(error instanceof Error ? error.message : 'ì„¤ì • ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setLoading(false);\n      loadingRef.current = false;\n    }\n  }, []);\n\n  /**\n   * ğŸ”¥ ì„¤ì • ì—…ë°ì´íŠ¸ (íƒ€ì… ì•ˆì „)\n   */\n  const updateSetting = useCallback(async <K extends keyof SettingsData, T extends keyof SettingsData[K]>(\n    category: K,\n    key: T,\n    value: SettingsData[K][T]\n  ): Promise<void> => {\n    if (!settings || savingRef.current) return;\n\n    try {\n      setSaving(true);\n      savingRef.current = true;\n\n      // ğŸ”¥ ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\n      setSettings(prev => {\n        if (!prev) return null;\n\n        return {\n          ...prev,\n          [category]: {\n            ...prev[category],\n            [key]: value,\n          },\n        };\n      });\n\n      // ğŸ”¥ ë°±ì—”ë“œì— ì €ì¥ (dot notation ì‚¬ìš©)\n      const keyPath = `${category}.${String(key)}`;\n      Logger.debug('USE_SETTINGS', `Updating setting: ${keyPath}`, { value });\n\n      const result = await window.electronAPI.settings.set(keyPath, value);\n\n      if (result.success) {\n        Logger.info('USE_SETTINGS', `Setting updated successfully: ${keyPath}`, { value });\n\n        // ğŸ”¥ í…Œë§ˆ ì„¤ì •ì˜ ê²½ìš° localStorageì—ë„ ì¦‰ì‹œ ì €ì¥ (ë°±ì—…)\n        if (category === 'app' && key === 'theme') {\n          try {\n            localStorage.setItem('loop-theme', value as string);\n            Logger.debug('USE_SETTINGS', 'Theme also saved to localStorage', { theme: value });\n          } catch (error) {\n            Logger.warn('USE_SETTINGS', 'Failed to save theme to localStorage', error);\n          }\n        }\n\n        // ğŸ”¥ í°íŠ¸ ì„¤ì •ì´ ë³€ê²½ë˜ë©´ CSS ë³€ìˆ˜ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ (ìƒˆ ê°’ìœ¼ë¡œ)\n        if (category === 'app' && (key === 'fontSize' || key === 'fontFamily')) {\n          const root = document.documentElement;\n          if (key === 'fontSize') {\n            root.style.setProperty('--app-font-size', `${value}px`);\n          } else if (key === 'fontFamily') {\n            root.style.setProperty('--app-font-family', value as string);\n          }\n          Logger.debug('USE_SETTINGS', 'CSS font variables updated immediately', {\n            key,\n            value\n          });\n        }\n      } else {\n        throw new Error(result.error || `Failed to save ${keyPath}`);\n      }\n    } catch (error) {\n      Logger.error('USE_SETTINGS', `Error updating setting: ${category}.${String(key)}`, error);\n\n      // ğŸ”¥ ì—ëŸ¬ ì‹œ ë¡¤ë°±\n      await loadSettings();\n      setError(`ì„¤ì • ì €ì¥ ì‹¤íŒ¨: ${error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);\n    } finally {\n      setSaving(false);\n      savingRef.current = false;\n    }\n  }, [settings, loadSettings]);\n\n  /**\n   * ğŸ”¥ ëª¨ë“  ì„¤ì • ì €ì¥ - ëª…ì‹œì  ì¹´í…Œê³ ë¦¬ ì €ì¥ìœ¼ë¡œ ê°•í™”\n   */\n  const saveAllSettings = useCallback(async (): Promise<void> => {\n    if (!settings || savingRef.current) return;\n\n    try {\n      savingRef.current = true;\n      setSaving(true);\n      setError(null);\n\n      Logger.info('USE_SETTINGS', 'Saving all settings...');\n\n      // ğŸ”¥ ëª…ì‹œì ìœ¼ë¡œ ëª¨ë“  ì¹´í…Œê³ ë¦¬ ì €ì¥ (ëˆ„ë½ ë°©ì§€)\n      const categories = ['app', 'keyboard', 'ui', 'performance', 'account', 'notifications'] as const;\n\n      for (const category of categories) {\n        const categoryData = settings[category];\n        if (categoryData) {\n          Logger.debug('USE_SETTINGS', `Saving category: ${category}`, categoryData);\n          const result = await window.electronAPI.settings.set(category, categoryData);\n          if (!result.success) {\n            throw new Error(`Failed to save ${category} settings: ${result.error}`);\n          }\n        }\n      }\n\n      Logger.info('USE_SETTINGS', 'All settings saved successfully');\n\n      // ì €ì¥ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ (ì„ íƒì )\n      if (typeof window !== 'undefined' && window.electronAPI?.notifications?.show) {\n        try {\n          await window.electronAPI.notifications.show('ì„¤ì • ì €ì¥ ì™„ë£Œ', 'ëª¨ë“  ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');\n        } catch (e) {\n          // ì•Œë¦¼ ì‹¤íŒ¨ëŠ” ë¬´ì‹œ\n        }\n      }\n\n    } catch (error) {\n      Logger.error('USE_SETTINGS', 'Failed to save all settings', error);\n      setError(`ì „ì²´ ì„¤ì • ì €ì¥ ì‹¤íŒ¨: ${error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);\n    } finally {\n      setSaving(false);\n      savingRef.current = false;\n    }\n  }, [settings]);\n\n  /**\n   * ğŸ”¥ ì„¤ì • ë¦¬ì…‹\n   */\n  const resetSettings = useCallback(async (): Promise<void> => {\n    if (savingRef.current) return;\n\n    try {\n      savingRef.current = true;\n      setSaving(true);\n      setError(null);\n\n      Logger.info('USE_SETTINGS', 'Resetting all settings...');\n\n      const result = await window.electronAPI.settings.reset();\n\n      if (result.success) {\n        // ğŸ”¥ ì„±ê³µ ì‹œ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •í•˜ê³  ë‹¤ì‹œ ë¡œë“œ\n        setSettings(defaultSettings);\n        await loadSettings();\n        Logger.info('USE_SETTINGS', 'Settings reset successfully');\n      } else {\n        throw new Error(result.error || 'Failed to reset settings');\n      }\n    } catch (error) {\n      Logger.error('USE_SETTINGS', 'Failed to reset settings', error);\n      setError(`ì„¤ì • ì´ˆê¸°í™” ì‹¤íŒ¨: ${error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);\n    } finally {\n      setSaving(false);\n      savingRef.current = false;\n    }\n  }, [loadSettings]);\n\n  /**\n   * ğŸ”¥ ì´ˆê¸° ì„¤ì • ë¡œë“œ\n   */\n  useEffect(() => {\n    loadSettings();\n  }, [loadSettings]);\n\n  // subscribe to main process broadcasts so UI updates immediately when settings change\n  useEffect(() => {\n    try {\n      const unsub = (window.electronAPI as any).settings.onDidChange?.((payload: { keyPath: string; value: unknown; reset?: boolean }) => {\n        if (!payload || !payload.keyPath) return;\n\n        // dot-path merge into settings (safe with type guards)\n        setSettings(prev => {\n          if (!prev) return prev;\n\n          const parts = payload.keyPath.split('.').filter(Boolean);\n          if (parts.length === 0) return prev;\n\n          if (parts.length === 1) {\n            const category = parts[0] as string;\n            return Object.assign({}, prev as any, { [(category as any)]: payload.value }) as SettingsData;\n          }\n\n          const cat = parts[0] as string;\n          const rest = parts.slice(1) as string[];\n          if (!cat) return prev;\n\n          const newCategory = Object.assign({}, (prev as any)[cat]) as Record<string, any>;\n          let target: Record<string, any> = newCategory || {};\n\n          for (let i = 0; i < rest.length - 1; i++) {\n            const k = rest[i];\n            if (!k) continue;\n            if (!(k in target)) target[k] = {};\n            target = target[k] as Record<string, any>;\n          }\n\n          const lastKey = rest[rest.length - 1];\n          if (lastKey) target[lastKey] = payload.value;\n\n          return Object.assign({}, prev as any, { [(cat as any)]: newCategory }) as SettingsData;\n        });\n      });\n\n      return () => { if (typeof unsub === 'function') unsub(); };\n    } catch (e) {\n      // ignore if API missing\n      return () => { };\n    }\n  }, []);\n\n  /**\n   * ğŸ”¥ ì—ëŸ¬ ìë™ í´ë¦¬ì–´ (10ì´ˆ í›„)\n   */\n  useEffect(() => {\n    if (error) {\n      const timer = setTimeout(() => {\n        setError(null);\n      }, 10000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [error]);\n\n  return {\n    settings,\n    loading,\n    saving,\n    error,\n    updateSetting,\n    saveAllSettings,\n    resetSettings,\n    setSettings,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 872, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/ui/Avatar.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, forwardRef, useState } from 'react';\nimport { User } from 'lucide-react';\nimport { Logger } from '../../../shared/logger';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜\nconst AVATAR_STYLES = {\n  root: 'relative inline-flex items-center justify-center overflow-hidden rounded-full select-none',\n  sizes: {\n    sm: 'h-8 w-8 text-xs',\n    md: 'h-10 w-10 text-sm',\n    lg: 'h-12 w-12 text-base',\n    xl: 'h-16 w-16 text-lg',\n  },\n  image: 'aspect-square h-full w-full object-cover object-center',\n  fallback: 'flex h-full w-full items-center justify-center bg-slate-100 text-slate-600 font-medium',\n  icon: 'h-1/2 w-1/2 text-slate-400',\n  status: {\n    base: 'absolute bottom-0 right-0 rounded-full border-2 border-white',\n    sizes: {\n      sm: 'h-2 w-2',\n      md: 'h-2.5 w-2.5',\n      lg: 'h-3 w-3',\n      xl: 'h-4 w-4',\n    },\n    variants: {\n      online: 'bg-green-500',\n      away: 'bg-yellow-500',\n      busy: 'bg-red-500',\n      offline: 'bg-slate-400',\n    },\n  },\n} as const;\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\nexport interface AvatarProps {\n  readonly size?: keyof typeof AVATAR_STYLES.sizes;\n  readonly src?: string;\n  readonly alt?: string;\n  readonly fallback?: string;\n  readonly status?: keyof typeof AVATAR_STYLES.status.variants;\n  readonly className?: string;\n  readonly children?: ReactNode;\n  readonly onClick?: () => void;\n  readonly 'aria-label'?: string;\n}\n\nexport interface AvatarImageProps {\n  readonly src: string;\n  readonly alt: string;\n  readonly className?: string;\n  readonly onLoadingStatusChange?: (loading: boolean) => void;\n}\n\nexport interface AvatarFallbackProps {\n  readonly className?: string;\n  readonly children: ReactNode;\n}\n\nfunction cn(...classes: (string | undefined | false)[]): string {\n  return classes.filter(Boolean).join(' ');\n}\n\nexport const Avatar = forwardRef<HTMLDivElement, AvatarProps>(\n  ({\n    size = 'md',\n    src,\n    alt,\n    fallback,\n    status,\n    className,\n    children,\n    onClick,\n    'aria-label': ariaLabel,\n    ...props\n  }, ref) => {\n\n    const [imageLoaded, setImageLoaded] = useState<boolean>(false);\n    const [imageError, setImageError] = useState<boolean>(false);\n\n    const avatarClassName = cn(\n      AVATAR_STYLES.root,\n      AVATAR_STYLES.sizes[size],\n      onClick && 'cursor-pointer hover:opacity-80 transition-opacity',\n      className\n    );\n\n    const handleClick = (): void => {\n      if (!onClick) return;\n\n      Logger.info('AVATAR', 'Avatar clicked', { size, hasImage: !!src });\n      onClick();\n    };\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n      if (!onClick) return;\n\n      if (event.key === 'Enter' || event.key === ' ') {\n        event.preventDefault();\n        handleClick();\n      }\n    };\n\n    const showImage = src && !imageError && imageLoaded;\n    const showFallback = !src || imageError || !imageLoaded;\n\n    return (\n      <div\n        ref={ref}\n        className={avatarClassName}\n        onClick={onClick ? handleClick : undefined}\n        onKeyDown={onClick ? handleKeyDown : undefined}\n        role={onClick ? 'button' : undefined}\n        tabIndex={onClick ? 0 : undefined}\n        aria-label={ariaLabel || alt}\n        {...props}\n      >\n        {/* ì´ë¯¸ì§€ */}\n        {src && (\n          <img\n            src={src}\n            alt={alt || 'ì‚¬ìš©ì ì•„ë°”íƒ€'}\n            className={cn(\n              AVATAR_STYLES.image,\n              showImage ? 'opacity-100' : 'opacity-0'\n            )}\n            onLoad={() => {\n              setImageLoaded(true);\n              setImageError(false);\n            }}\n            onError={() => {\n              setImageError(true);\n              setImageLoaded(false);\n            }}\n          />\n        )}\n\n        {/* í´ë°± */}\n        {showFallback && (\n          <div className={AVATAR_STYLES.fallback}>\n            {children || fallback ? (\n              children || fallback\n            ) : (\n              <User className={AVATAR_STYLES.icon} aria-hidden=\"true\" />\n            )}\n          </div>\n        )}\n\n        {/* ìƒíƒœ í‘œì‹œ */}\n        {status && (\n          <span\n            className={cn(\n              AVATAR_STYLES.status.base,\n              AVATAR_STYLES.status.sizes[size],\n              AVATAR_STYLES.status.variants[status]\n            )}\n            aria-label={`ìƒíƒœ: ${status}`}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nAvatar.displayName = 'Avatar';\n\nexport const AvatarImage = forwardRef<HTMLImageElement, AvatarImageProps>(\n  ({ src, alt, className, onLoadingStatusChange, ...props }, ref) => {\n\n    const handleLoad = (): void => {\n      onLoadingStatusChange?.(false);\n    };\n\n    const handleError = (): void => {\n      onLoadingStatusChange?.(false);\n    };\n\n    return (\n      <img\n        ref={ref}\n        src={src}\n        alt={alt}\n        className={cn(AVATAR_STYLES.image, className)}\n        onLoad={handleLoad}\n        onError={handleError}\n        {...props}\n      />\n    );\n  }\n);\n\nAvatarImage.displayName = 'AvatarImage';\n\nexport const AvatarFallback = forwardRef<HTMLDivElement, AvatarFallbackProps>(\n  ({ className, children, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        className={cn(AVATAR_STYLES.fallback, className)}\n        {...props}\n      >\n        {children || <User className={AVATAR_STYLES.icon} aria-hidden=\"true\" />}\n      </div>\n    );\n  }\n);\n\nAvatarFallback.displayName = 'AvatarFallback';\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1044, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/ui/Tooltip.tsx"],"sourcesContent":["'use client';\n\nimport React, { ReactNode, useState, useRef, useEffect, cloneElement, isValidElement } from 'react';\nimport { Logger } from '../../../shared/logger';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜\nconst TOOLTIP_STYLES = {\n  trigger: 'inline-block relative',\n  tooltip: 'absolute z-50 px-3 py-2 text-xs font-medium text-white bg-slate-900 rounded-md shadow-lg whitespace-nowrap pointer-events-none transition-opacity duration-200',\n  arrow: 'absolute w-2 h-2 bg-slate-900 transform rotate-45',\n  positions: {\n    top: {\n      tooltip: 'bottom-full left-1/2 transform -translate-x-1/2 mb-3', // ë§ˆì§„ ì¦ê°€ (2 â†’ 3)\n      arrow: 'top-full left-1/2 transform -translate-x-1/2 -translate-y-1/2',\n    },\n    bottom: {\n      tooltip: 'top-full left-1/2 transform -translate-x-1/2 mt-3', // ë§ˆì§„ ì¦ê°€ (2 â†’ 3)\n      arrow: 'bottom-full left-1/2 transform -translate-x-1/2 translate-y-1/2',\n    },\n    left: {\n      tooltip: 'right-full top-1/2 transform -translate-y-1/2 mr-3', // ë§ˆì§„ ì¦ê°€ (2 â†’ 3)\n      arrow: 'left-full top-1/2 transform -translate-y-1/2 -translate-x-1/2',\n    },\n    right: {\n      tooltip: 'left-full top-1/2 transform -translate-y-1/2 ml-3', // ë§ˆì§„ ì¦ê°€ (2 â†’ 3)\n      arrow: 'right-full top-1/2 transform -translate-y-1/2 translate-x-1/2',\n    },\n  },\n  variants: {\n    default: 'bg-slate-900 text-white',\n    light: 'bg-white text-slate-900 border border-slate-200 shadow-md',\n    error: 'bg-red-600 text-white',\n    success: 'bg-green-600 text-white',\n    warning: 'bg-yellow-600 text-white',\n  },\n} as const;\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\nexport interface TooltipProps {\n  readonly content: ReactNode;\n  readonly children: ReactNode;\n  readonly side?: keyof typeof TOOLTIP_STYLES.positions;\n  readonly variant?: keyof typeof TOOLTIP_STYLES.variants;\n  readonly delay?: number;\n  readonly disabled?: boolean;\n  readonly showArrow?: boolean;\n  readonly trigger?: 'hover' | 'click' | 'focus' | 'manual';\n  readonly open?: boolean;\n  readonly onOpenChange?: (open: boolean) => void;\n  readonly className?: string;\n  readonly sideOffset?: number;\n}\n\nfunction cn(...classes: (string | undefined | false | null)[]): string {\n  return classes.filter(Boolean).join(' ');\n}\n\nexport function Tooltip({\n  content,\n  children,\n  side = 'top',\n  variant = 'default',\n  delay = 200,\n  disabled = false,\n  showArrow = true,\n  trigger = 'hover',\n  open: controlledOpen,\n  onOpenChange,\n  className,\n  sideOffset = 0,\n}: TooltipProps): React.ReactElement {\n  const [internalOpen, setInternalOpen] = useState<boolean>(false);\n  const [mounted, setMounted] = useState<boolean>(false);\n  const triggerRef = useRef<HTMLElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const isOpen = controlledOpen !== undefined ? controlledOpen : internalOpen;\n  const isControlled = controlledOpen !== undefined;\n\n  useEffect(() => {\n    setMounted(true);\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  const setOpen = (open: boolean): void => {\n    if (disabled) return;\n\n    if (isControlled) {\n      onOpenChange?.(open);\n    } else {\n      setInternalOpen(open);\n    }\n\n    Logger.debug('TOOLTIP', `Tooltip ${open ? 'opened' : 'closed'}`, { side, trigger });\n  };\n\n  const showTooltip = (): void => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    timeoutRef.current = setTimeout(() => {\n      setOpen(true);\n    }, delay);\n  };\n\n  const hideTooltip = (): void => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    setOpen(false);\n  };\n\n  const handleMouseEnter = (): void => {\n    if (trigger === 'hover') {\n      showTooltip();\n    }\n  };\n\n  const handleMouseLeave = (): void => {\n    if (trigger === 'hover') {\n      hideTooltip();\n    }\n  };\n\n  const handleClick = (): void => {\n    if (trigger === 'click') {\n      setOpen(!isOpen);\n    }\n  };\n\n  const handleFocus = (): void => {\n    if (trigger === 'focus') {\n      showTooltip();\n    }\n  };\n\n  const handleBlur = (): void => {\n    if (trigger === 'focus') {\n      hideTooltip();\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent): void => {\n    if (event.key === 'Escape' && isOpen) {\n      hideTooltip();\n    }\n  };\n\n  // childrenì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€\n  const triggerElement = isValidElement(children) \n    ? (() => {\n        const child = children as React.ReactElement<Record<string, unknown>>;\n        const childProps = (child.props || {}) as Record<string, unknown>;\n        return cloneElement(child as React.ReactElement<any>, {\n          onMouseEnter: (e: React.MouseEvent) => { (childProps.onMouseEnter as ((e: React.MouseEvent)=>void) | undefined)?.(e); handleMouseEnter(); },\n          onMouseLeave: (e: React.MouseEvent) => { (childProps.onMouseLeave as ((e: React.MouseEvent)=>void) | undefined)?.(e); handleMouseLeave(); },\n          onClick: (e: React.MouseEvent) => { (childProps.onClick as ((e: React.MouseEvent)=>void) | undefined)?.(e); handleClick(); },\n          onFocus: (e: React.FocusEvent) => { (childProps.onFocus as ((e: React.FocusEvent)=>void) | undefined)?.(e); handleFocus(); },\n          onBlur: (e: React.FocusEvent) => { (childProps.onBlur as ((e: React.FocusEvent)=>void) | undefined)?.(e); handleBlur(); },\n          onKeyDown: (e: React.KeyboardEvent) => { (childProps.onKeyDown as ((e: React.KeyboardEvent)=>void) | undefined)?.(e); handleKeyDown(e); },\n          'aria-describedby': isOpen ? 'tooltip' : undefined,\n        });\n      })()\n    : children;\n\n  // Tooltip ìŠ¤íƒ€ì¼ ê³„ì‚°\n  const tooltipClassName = cn(\n    TOOLTIP_STYLES.tooltip,\n    TOOLTIP_STYLES.positions[side].tooltip,\n    TOOLTIP_STYLES.variants[variant],\n    isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none',\n    className\n  );\n\n  const arrowClassName = cn(\n    TOOLTIP_STYLES.arrow,\n    TOOLTIP_STYLES.positions[side].arrow,\n    variant === 'light' ? 'bg-white border-l border-t border-slate-200' : 'bg-slate-900'\n  );\n\n  if (!mounted) {\n    return <div className={TOOLTIP_STYLES.trigger}>{children}</div>;\n  }\n\n  return (\n    <div className={TOOLTIP_STYLES.trigger}>\n      {triggerElement}\n      {isOpen && content && (\n        <div\n          ref={tooltipRef}\n          id=\"tooltip\"\n          role=\"tooltip\"\n          className={tooltipClassName}\n          style={{\n            [side === 'top' || side === 'bottom' ? 'marginTop' as const : 'marginLeft' as const]:\n              (side === 'top' || side === 'left') ? -sideOffset : sideOffset,\n          }}\n        >\n          {content}\n          {showArrow && (\n            <div \n              className={arrowClassName} \n              aria-hidden=\"true\"\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ğŸ”¥ í¸ì˜ í•¨ìˆ˜ë“¤\nexport const TooltipProvider = ({ children }: { children: ReactNode }): React.ReactElement => {\n  return <>{children}</>;\n};\n\nexport const TooltipTrigger = ({ children }: { children: ReactNode }): React.ReactElement => {\n  return <>{children}</>;\n};\n\nexport const TooltipContent = ({ children }: { children: ReactNode }): React.ReactElement => {\n  return <>{children}</>;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKA,4BAA4B;AAC5B,MAAM,iBAAiB;IACrB,SAAS;IACT,SAAS;IACT,OAAO;IACP,WAAW;QACT,KAAK;YACH,SAAS;YACT,OAAO;QACT;QACA,QAAQ;YACN,SAAS;YACT,OAAO;QACT;QACA,MAAM;YACJ,SAAS;YACT,OAAO;QACT;QACA,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IACA,UAAU;QACR,SAAS;QACT,OAAO;QACP,OAAO;QACP,SAAS;QACT,SAAS;IACX;AACF;AAkBA,SAAS,GAAG,GAAG,OAA8C;IAC3D,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACtC;AAEO,SAAS,QAAQ,EACtB,OAAO,EACP,QAAQ,EACR,OAAO,KAAK,EACZ,UAAU,SAAS,EACnB,QAAQ,GAAG,EACX,WAAW,KAAK,EAChB,YAAY,IAAI,EAChB,UAAU,OAAO,EACjB,MAAM,cAAc,EACpB,YAAY,EACZ,SAAS,EACT,aAAa,CAAC,EACD;IACb,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAChD,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAe;IACvC,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAC1C,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAyB;IAEjD,MAAM,SAAS,mBAAmB,YAAY,iBAAiB;IAC/D,MAAM,eAAe,mBAAmB;IAExC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,WAAW;QACX,OAAO;YACL,IAAI,WAAW,OAAO,EAAE;gBACtB,aAAa,WAAW,OAAO;YACjC;QACF;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,CAAC;QACf,IAAI,UAAU;QAEd,IAAI,cAAc;YAChB,eAAe;QACjB,OAAO;YACL,gBAAgB;QAClB;QAEA,uHAAA,CAAA,SAAM,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,WAAW,UAAU,EAAE;YAAE;YAAM;QAAQ;IACnF;IAEA,MAAM,cAAc;QAClB,IAAI,WAAW,OAAO,EAAE;YACtB,aAAa,WAAW,OAAO;QACjC;QAEA,WAAW,OAAO,GAAG,WAAW;YAC9B,QAAQ;QACV,GAAG;IACL;IAEA,MAAM,cAAc;QAClB,IAAI,WAAW,OAAO,EAAE;YACtB,aAAa,WAAW,OAAO;QACjC;QAEA,QAAQ;IACV;IAEA,MAAM,mBAAmB;QACvB,IAAI,YAAY,SAAS;YACvB;QACF;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,YAAY,SAAS;YACvB;QACF;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,YAAY,SAAS;YACvB,QAAQ,CAAC;QACX;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,YAAY,SAAS;YACvB;QACF;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,YAAY,SAAS;YACvB;QACF;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,MAAM,GAAG,KAAK,YAAY,QAAQ;YACpC;QACF;IACF;IAEA,uBAAuB;IACvB,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,iBAAc,AAAD,EAAE,YAClC,CAAC;QACC,MAAM,QAAQ;QACd,MAAM,aAAc,MAAM,KAAK,IAAI,CAAC;QACpC,qBAAO,CAAA,GAAA,qMAAA,CAAA,eAAY,AAAD,EAAE,OAAkC;YACpD,cAAc,CAAC;gBAA2B,WAAW,YAAY,GAAiD;gBAAI;YAAoB;YAC1I,cAAc,CAAC;gBAA2B,WAAW,YAAY,GAAiD;gBAAI;YAAoB;YAC1I,SAAS,CAAC;gBAA2B,WAAW,OAAO,GAAiD;gBAAI;YAAe;YAC3H,SAAS,CAAC;gBAA2B,WAAW,OAAO,GAAiD;gBAAI;YAAe;YAC3H,QAAQ,CAAC;gBAA2B,WAAW,MAAM,GAAiD;gBAAI;YAAc;YACxH,WAAW,CAAC;gBAA8B,WAAW,SAAS,GAAoD;gBAAI,cAAc;YAAI;YACxI,oBAAoB,SAAS,YAAY;QAC3C;IACF,CAAC,MACD;IAEJ,iBAAiB;IACjB,MAAM,mBAAmB,GACvB,eAAe,OAAO,EACtB,eAAe,SAAS,CAAC,KAAK,CAAC,OAAO,EACtC,eAAe,QAAQ,CAAC,QAAQ,EAChC,SAAS,gBAAgB,iCACzB;IAGF,MAAM,iBAAiB,GACrB,eAAe,KAAK,EACpB,eAAe,SAAS,CAAC,KAAK,CAAC,KAAK,EACpC,YAAY,UAAU,gDAAgD;IAGxE,IAAI,CAAC,SAAS;QACZ,qBAAO,8OAAC;YAAI,WAAW,eAAe,OAAO;sBAAG;;;;;;IAClD;IAEA,qBACE,8OAAC;QAAI,WAAW,eAAe,OAAO;;YACnC;YACA,UAAU,yBACT,8OAAC;gBACC,KAAK;gBACL,IAAG;gBACH,MAAK;gBACL,WAAW;gBACX,OAAO;oBACL,CAAC,SAAS,SAAS,SAAS,WAAW,cAAuB,aAAsB,EAClF,AAAC,SAAS,SAAS,SAAS,SAAU,CAAC,aAAa;gBACxD;;oBAEC;oBACA,2BACC,8OAAC;wBACC,WAAW;wBACX,eAAY;;;;;;;;;;;;;;;;;;AAO1B;AAGO,MAAM,kBAAkB,CAAC,EAAE,QAAQ,EAA2B;IACnE,qBAAO;kBAAG;;AACZ;AAEO,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAA2B;IAClE,qBAAO;kBAAG;;AACZ;AAEO,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAA2B;IAClE,qBAAO;kBAAG;;AACZ","debugId":null}},
    {"offset": {"line": 1264, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/ui/Badge.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, forwardRef } from 'react';\nimport { Logger } from '../../../shared/logger';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜\nconst BADGE_STYLES = {\n  base: 'inline-flex items-center rounded-full text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n  sizes: {\n    sm: 'px-2 py-0.5 text-xs',\n    md: 'px-2.5 py-1 text-xs',\n    lg: 'px-3 py-1.5 text-sm',\n  },\n  variants: {\n    default: 'bg-slate-100 text-slate-800 hover:bg-slate-200',\n    primary: 'bg-blue-100 text-blue-800 hover:bg-blue-200',\n    success: 'bg-green-100 text-green-800 hover:bg-green-200',\n    warning: 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200',\n    danger: 'bg-red-100 text-red-800 hover:bg-red-200',\n    purple: 'bg-purple-100 text-purple-800 hover:bg-purple-200',\n    orange: 'bg-orange-100 text-orange-800 hover:bg-orange-200',\n    solid: 'bg-slate-900 text-white hover:bg-slate-800',\n    outline: 'border border-slate-300 bg-transparent text-slate-700 hover:bg-slate-50',\n  },\n  interactive: 'cursor-pointer select-none',\n  disabled: 'opacity-50 cursor-not-allowed pointer-events-none',\n} as const;\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\nexport interface BadgeProps {\n  readonly variant?: keyof typeof BADGE_STYLES.variants;\n  readonly size?: keyof typeof BADGE_STYLES.sizes;\n  readonly interactive?: boolean;\n  readonly disabled?: boolean;\n  readonly className?: string;\n  readonly children: ReactNode;\n  readonly onClick?: () => void;\n  readonly role?: string;\n  readonly 'aria-label'?: string;\n  readonly 'aria-pressed'?: boolean;\n}\n\nfunction cn(...classes: (string | undefined | false)[]): string {\n  return classes.filter(Boolean).join(' ');\n}\n\nexport const Badge = forwardRef<HTMLSpanElement, BadgeProps>(\n  ({ \n    variant = 'default', \n    size = 'md',\n    interactive = false,\n    disabled = false,\n    className, \n    children, \n    onClick,\n    role,\n    'aria-label': ariaLabel,\n    'aria-pressed': ariaPressed,\n    ...props \n  }, ref) => {\n    \n    const badgeClassName = cn(\n      BADGE_STYLES.base,\n      BADGE_STYLES.variants[variant],\n      BADGE_STYLES.sizes[size],\n      interactive && BADGE_STYLES.interactive,\n      disabled && BADGE_STYLES.disabled,\n      className\n    );\n\n    const handleClick = (): void => {\n      if (disabled || !onClick) return;\n      \n      Logger.info('BADGE', `Badge clicked: ${variant}`, { size, interactive });\n      onClick();\n    };\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLSpanElement>): void => {\n      if (disabled || !onClick) return;\n      \n      if (event.key === 'Enter' || event.key === ' ') {\n        event.preventDefault();\n        handleClick();\n      }\n    };\n\n    return (\n      <span\n        ref={ref}\n        className={badgeClassName}\n        onClick={interactive ? handleClick : undefined}\n        onKeyDown={interactive ? handleKeyDown : undefined}\n        role={interactive ? (role || 'button') : role}\n        tabIndex={interactive && !disabled ? 0 : undefined}\n        aria-label={ariaLabel}\n        aria-pressed={interactive ? ariaPressed : undefined}\n        aria-disabled={disabled}\n        {...props}\n      >\n        {children}\n      </span>\n    );\n  }\n);\n\nBadge.displayName = 'Badge';\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKA,4BAA4B;AAC5B,MAAM,eAAe;IACnB,MAAM;IACN,OAAO;QACL,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IACA,UAAU;QACR,SAAS;QACT,SAAS;QACT,SAAS;QACT,SAAS;QACT,QAAQ;QACR,QAAQ;QACR,QAAQ;QACR,OAAO;QACP,SAAS;IACX;IACA,aAAa;IACb,UAAU;AACZ;AAgBA,SAAS,GAAG,GAAG,OAAuC;IACpD,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACtC;AAEO,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAC5B,CAAC,EACC,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,cAAc,KAAK,EACnB,WAAW,KAAK,EAChB,SAAS,EACT,QAAQ,EACR,OAAO,EACP,IAAI,EACJ,cAAc,SAAS,EACvB,gBAAgB,WAAW,EAC3B,GAAG,OACJ,EAAE;IAED,MAAM,iBAAiB,GACrB,aAAa,IAAI,EACjB,aAAa,QAAQ,CAAC,QAAQ,EAC9B,aAAa,KAAK,CAAC,KAAK,EACxB,eAAe,aAAa,WAAW,EACvC,YAAY,aAAa,QAAQ,EACjC;IAGF,MAAM,cAAc;QAClB,IAAI,YAAY,CAAC,SAAS;QAE1B,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,SAAS,EAAE;YAAE;YAAM;QAAY;QACtE;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,YAAY,CAAC,SAAS;QAE1B,IAAI,MAAM,GAAG,KAAK,WAAW,MAAM,GAAG,KAAK,KAAK;YAC9C,MAAM,cAAc;YACpB;QACF;IACF;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAW;QACX,SAAS,cAAc,cAAc;QACrC,WAAW,cAAc,gBAAgB;QACzC,MAAM,cAAe,QAAQ,WAAY;QACzC,UAAU,eAAe,CAAC,WAAW,IAAI;QACzC,cAAY;QACZ,gBAAc,cAAc,cAAc;QAC1C,iBAAe;QACd,GAAG,KAAK;kBAER;;;;;;AAGP;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1341, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/layout/AppSidebar.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useLayoutEffect, useRef } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useSettings } from '../../app/settings/hooks/useSettings';\nimport { Avatar } from '../ui/Avatar';\nimport {\n  Home,\n  Folder,\n  BarChart3,\n  Sparkles,\n  Settings,\n  ChevronLeft,\n  ChevronRight,\n  Cloud,\n  Wifi,\n  WifiOff,\n  type LucideIcon\n} from 'lucide-react';\nimport { Button } from '../ui/Button';\nimport { Tooltip } from '../ui/Tooltip';\nimport { Badge } from '../ui/Badge';\nimport { Logger } from '../../../shared/logger';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜\nconst SIDEBAR_STYLES = {\n  container: 'flex flex-col h-full bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-700 transition-all duration-300 min-w-0',\n  collapsed: 'w-16',\n  expanded: 'w-64',\n  logoSection: 'h-auto min-h-[4rem] flex flex-col justify-center border-b border-slate-200 dark:border-slate-700 px-6 py-3',\n  logoCollapsed: 'h-auto min-h-[8rem] flex items-center justify-center border-b border-slate-200 dark:border-slate-700 px-3 py-4',\n  logoText: 'text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent',\n  logoIcon: 'w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-sm',\n  profileSection: 'border-b border-slate-200 dark:border-slate-700 p-4',\n  profileCollapsed: 'border-b border-slate-200 dark:border-slate-700 p-3 flex flex-col items-center gap-2',\n  profileContent: 'flex items-center gap-3',\n  profileInfo: 'flex-1',\n  profileName: 'font-medium text-slate-900 dark:text-slate-100 text-sm',\n  profileStatus: 'flex items-center gap-1 mt-0.5',\n  statusDot: 'w-1.5 h-1.5 bg-green-500 rounded-full',\n  statusText: 'text-xs text-slate-500 dark:text-slate-400',\n  collapseButton: 'h-6 w-6 p-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300',\n  navSection: 'flex-1 py-4',\n  navList: 'space-y-1 px-3',\n  navItem: 'flex items-center h-10 px-3 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all duration-150 group cursor-pointer',\n  navItemActive: 'flex items-center h-10 px-3 bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-400 rounded-lg font-medium',\n  navItemCollapsed: 'flex items-center justify-center h-10 w-10 mx-auto text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-all duration-150 cursor-pointer',\n  navItemActiveCollapsed: 'flex items-center justify-center h-10 w-10 mx-auto bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-400 rounded-lg',\n  icon: 'w-5 h-5 group-hover:scale-110 transition-transform duration-150 flex-shrink-0',\n  iconCollapsed: 'w-5 h-5',\n  text: 'ml-3 font-medium',\n  badge: 'ml-auto',\n  bottomSection: 'border-t border-slate-200 dark:border-slate-700 p-3',\n} as const;\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\ninterface SidebarItem {\n  readonly id: string;\n  readonly label: string;\n  readonly icon: LucideIcon;\n  readonly href: string;\n  readonly badge?: number;\n  readonly ariaLabel?: string;\n}\n\nexport interface AppSidebarProps {\n  readonly activeRoute?: string;\n  readonly onNavigate?: (href: string) => void;\n  readonly collapsed?: boolean;\n  readonly onToggleCollapse?: () => void;\n}\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ìƒìˆ˜ ë¶„ë¦¬\nconst SIDEBAR_ITEMS: readonly SidebarItem[] = [\n  {\n    id: 'dashboard',\n    label: 'ëŒ€ì‹œë³´ë“œ',\n    icon: Home,\n    href: '/',\n    ariaLabel: 'ëŒ€ì‹œë³´ë“œë¡œ ì´ë™'\n  },\n  {\n    id: 'projects',\n    label: 'í”„ë¡œì íŠ¸',\n    icon: Folder,\n    href: '/projects',\n    ariaLabel: 'í”„ë¡œì íŠ¸ ê´€ë¦¬ë¡œ ì´ë™'\n  },\n  {\n    id: 'analytics',\n    label: 'í†µê³„',\n    icon: BarChart3,\n    href: '/analytics',\n    ariaLabel: 'ë¶„ì„ ë° í†µê³„ë¡œ ì´ë™'\n  },\n  {\n    id: 'ai',\n    label: 'Loop AI',\n    icon: Sparkles,\n    href: '/ai',\n    badge: 2,\n    ariaLabel: 'AI ë„êµ¬ë¡œ ì´ë™'\n  },\n  {\n    id: 'settings',\n    label: 'ì„¤ì •',\n    icon: Settings,\n    href: '/settings',\n    ariaLabel: 'ì„¤ì •ìœ¼ë¡œ ì´ë™'\n  },\n] as const;\n\nexport function AppSidebar({\n  activeRoute = '/',\n  onNavigate,\n  collapsed: controlledCollapsed,\n  onToggleCollapse\n}: AppSidebarProps): React.ReactElement {\n\n  const [internalCollapsed, setInternalCollapsed] = useState<boolean>(false);\n  const isControlled = controlledCollapsed !== undefined;\n  const collapsed = isControlled ? controlledCollapsed : internalCollapsed;\n\n  const authCtx = useAuth() as any;\n  const { auth: googleUserInfo, loadAuthStatus, loaded: authLoaded } = authCtx;\n\n  // settings hook for account-local profile (displayName, avatar)\n  const { settings: loadedSettings, loading: settingsLoading, setSettings } = useSettings();\n\n  // avatar src state to handle onError fallback and controlled updates\n  const defaultAvatar = '/static/avatar-default.png';\n  const [avatarSrc, setAvatarSrc] = useState<string | null>(null);\n\n  // Use consistent initial state to prevent layout shift\n  const [mounted, setMounted] = useState<boolean>(false);\n  const [isOnline, setIsOnline] = useState<boolean>(true); // Default to online to prevent flash\n\n  // Prefer account settings when not authenticated via Google. If Google auth present, use google profile.\n  const accountProfile = loadedSettings?.account;\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  // unify visible profile for legacy UI uses\n  const visibleProfile: any = (authLoaded && googleUserInfo && googleUserInfo.isAuthenticated)\n    ? googleUserInfo\n    : accountProfile\n      ? {\n        isAuthenticated: !!(accountProfile.displayName || accountProfile.username || accountProfile.email),\n        userName: accountProfile.displayName || accountProfile.username,\n        userEmail: accountProfile.email,\n        userPicture: accountProfile.avatar,\n      }\n      : null;\n\n  // update avatarSrc when authLoaded, googleUserInfo, or account settings change\n  useEffect(() => {\n    Logger.debug('APPSIDEBAR', 'Avatar update triggered', {\n      authLoaded,\n      googleUserInfoAuthenticated: googleUserInfo?.isAuthenticated,\n      accountProfileExists: !!accountProfile,\n      accountProfileAvatar: accountProfile?.avatar,\n      accountProfileAvatarThumb: (accountProfile as any)?.avatarThumb\n    });\n\n    // ğŸ”¥ ìˆ˜ì •: ë¡œì»¬ ì•„ë°”íƒ€ ì„¤ì •ì´ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ìš°ì„ ìœ¼ë¡œ ì‚¬ìš©\n    if (accountProfile?.avatar) {\n      const avatarValue = accountProfile.avatar;\n      Logger.debug('APPSIDEBAR', 'Using local account profile avatar (priority)', { avatarValue });\n\n      const v = String(avatarValue);\n      if (v.startsWith('file://')) {\n        const path = v.replace(/^file:\\/\\//, '');\n        (window.electronAPI as any).files?.readFileAsDataUrl(path).then((r: any) => {\n          if (r && r.success && r.data) {\n            Logger.debug('APPSIDEBAR', 'Loaded file:// avatar as data URL');\n            setAvatarSrc(r.data as string);\n          } else {\n            Logger.warn('APPSIDEBAR', 'Failed to load file:// avatar');\n            setAvatarSrc(null);\n          }\n        }).catch(() => {\n          Logger.warn('APPSIDEBAR', 'Error loading file:// avatar');\n          setAvatarSrc(null);\n        });\n      } else if (v.startsWith('loop-avatar://') || v.startsWith('data:')) {\n        // ğŸ”¥ loop-avatar:// í”„ë¡œí† ì½œê³¼ data: URL ëª¨ë‘ ì§ì ‘ ì‚¬ìš©\n        Logger.debug('APPSIDEBAR', 'Using loop-avatar:// or data: URL', { url: v.substring(0, 50) + '...' });\n        setAvatarSrc(v);\n      } else {\n        Logger.debug('APPSIDEBAR', 'Using direct avatar URL', { url: v });\n        setAvatarSrc(v);\n      }\n      return; // ë¡œì»¬ ì•„ë°”íƒ€ê°€ ìˆìœ¼ë©´ Google ì•„ë°”íƒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ\n    }\n\n    // prefer Google authenticated profile when available (only if no local avatar)\n    if (authLoaded && googleUserInfo && googleUserInfo.isAuthenticated) {\n      const picture = googleUserInfo.userPicture || (googleUserInfo.userEmail ? `https://ui-avatars.com/api/?name=${encodeURIComponent(googleUserInfo.userEmail)}&background=4f46e5&color=fff&size=64` : undefined);\n      Logger.debug('APPSIDEBAR', 'Using Google profile picture (fallback)', { picture });\n      setAvatarSrc(picture || null);\n      return;\n    }\n\n    // fallback to generated avatar or null\n    if (accountProfile && (accountProfile.displayName || accountProfile.username || accountProfile.email)) {\n      const name = String(accountProfile.displayName || accountProfile.username || accountProfile.email || '');\n      const fallbackUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=4f46e5&color=fff&size=64`;\n      Logger.debug('APPSIDEBAR', 'Using fallback generated avatar', { name, fallbackUrl });\n      setAvatarSrc(fallbackUrl);\n    } else {\n      Logger.debug('APPSIDEBAR', 'No avatar data available, setting to null');\n      setAvatarSrc(null);\n    }\n  }, [authLoaded, googleUserInfo, accountProfile]);\n\n  // subscribe to settings change broadcast for account.avatar and other profile fields\n  useEffect(() => {\n    try {\n      const unsub = (window.electronAPI as any).settings.onDidChange?.((payload: any) => {\n        if (!payload || !payload.keyPath) return;\n\n        // handle avatar and avatarThumb changes\n        if (payload.keyPath === 'account.avatar' || payload.keyPath === 'account.avatarThumb') {\n          const val = payload.value as string | null;\n          Logger.debug('APPSIDEBAR', 'Avatar setting changed via broadcast', {\n            keyPath: payload.keyPath,\n            hasValue: !!val,\n            valuePrefix: val?.substring(0, 50) + '...' || 'null'\n          });\n\n          if (!val) {\n            Logger.debug('APPSIDEBAR', 'Avatar value is null, clearing avatarSrc');\n            setAvatarSrc(null);\n            return;\n          }\n          if (val.startsWith('file://')) {\n            const p = val.replace(/^file:\\/\\//, '');\n            Logger.debug('APPSIDEBAR', 'Loading file:// avatar from broadcast', { path: p });\n            (window.electronAPI as any).files?.readFileAsDataUrl(p).then((r: any) => {\n              if (r && r.success && r.data) {\n                Logger.debug('APPSIDEBAR', 'Successfully loaded file:// avatar from broadcast');\n                setAvatarSrc(r.data as string);\n              }\n            }).catch(() => {\n              Logger.warn('APPSIDEBAR', 'Failed to load file:// avatar from broadcast');\n            });\n          } else {\n            // ğŸ”¥ data: URLê³¼ loop-avatar:// í”„ë¡œí† ì½œ ëª¨ë‘ ì§ì ‘ ì‚¬ìš©\n            Logger.debug('APPSIDEBAR', 'Setting avatar from broadcast', { valuePrefix: val.substring(0, 50) + '...' });\n            setAvatarSrc(val);\n          }\n        }\n\n        // for other account.* changes, trigger settings re-fetch to update display name etc\n        if (payload.keyPath.startsWith('account.') && payload.keyPath !== 'account.avatar') {\n          // Force settings hook to re-merge (this will trigger accountProfile change)\n          // The useSettings hook already subscribes to onDidChange and updates its state\n        }\n      });\n\n      return () => { if (typeof unsub === 'function') unsub(); };\n    } catch (e) {\n      return;\n    }\n  }, []);\n\n  // handle avatar click -> upload when local account, open settings when Google-auth\n  const handleAvatarClick = () => {\n    if (authLoaded && googleUserInfo && googleUserInfo.isAuthenticated) {\n      onNavigate?.('/settings');\n      return;\n    }\n\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = async (ev: React.ChangeEvent<HTMLInputElement>) => {\n    const f = ev.target.files?.[0];\n    if (!f) return;\n\n    // Size limit check (5MB)\n    const maxSize = 5 * 1024 * 1024;\n    if (f.size > maxSize) {\n      alert('íŒŒì¼ í¬ê¸°ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤. ë” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    const reader = new FileReader();\n    reader.onload = async () => {\n      const dataUrl = reader.result as string;\n      try {\n        const res = await window.electronAPI.settings.set('account.avatar', dataUrl);\n        if (res && res.success) {\n          // Don't update local settings state manually - onDidChange will handle it\n          // Just log success\n          Logger.info('SIDEBAR', 'Avatar uploaded successfully');\n        } else {\n          throw new Error(res?.error || 'save failed');\n        }\n      } catch (e) {\n        console.error('Failed to save avatar to settings', e);\n        alert('í”„ë¡œí•„ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\n      }\n    };\n    reader.readAsDataURL(f);\n  };\n\n  // Synchronous state restoration to prevent flash\n  useLayoutEffect(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        // Load online status first\n        const snap = (window as any).loopSnapshot && typeof (window as any).loopSnapshot.get === 'function' ? (window as any).loopSnapshot.get() : null;\n        if (snap && typeof snap.online === 'boolean') {\n          setIsOnline(snap.online);\n        } else {\n          setIsOnline(navigator.onLine);\n        }\n      } catch (e) {\n        setIsOnline(navigator.onLine);\n      }\n    }\n    setMounted(true);\n  }, []);\n\n  // Online/offline event listeners\n  useEffect(() => {\n    if (!mounted) return;\n\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, [mounted]);\n\n  // no extra sync needed - AuthContext bootstraps initial state from server\n\n  const handleToggleCollapse = (): void => {\n    if (isControlled) {\n      onToggleCollapse?.();\n    } else {\n      setInternalCollapsed(!collapsed);\n    }\n    Logger.info('SIDEBAR', `Sidebar ${collapsed ? 'expanded' : 'collapsed'}`);\n  };\n\n  const handleNavigate = (item: SidebarItem): void => {\n    Logger.info('SIDEBAR', `Navigation to ${item.label}`, { href: item.href });\n    onNavigate?.(item.href);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent, item: SidebarItem): void => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      handleNavigate(item);\n    }\n  };\n\n  const renderNavItem = (item: SidebarItem): React.ReactElement => {\n    const isActive = activeRoute === item.href;\n    const Icon = item.icon;\n\n    const navItemContent = (\n      <div\n        className={\n          collapsed\n            ? isActive\n              ? SIDEBAR_STYLES.navItemActiveCollapsed\n              : SIDEBAR_STYLES.navItemCollapsed\n            : isActive\n              ? SIDEBAR_STYLES.navItemActive\n              : SIDEBAR_STYLES.navItem\n        }\n        role=\"button\"\n        tabIndex={0}\n        onClick={() => handleNavigate(item)}\n        onKeyDown={(e) => handleKeyDown(e, item)}\n        aria-label={item.ariaLabel || item.label}\n        aria-current={isActive ? 'page' : undefined}\n      >\n        <Icon className={collapsed ? SIDEBAR_STYLES.iconCollapsed : SIDEBAR_STYLES.icon} />\n        {!collapsed && (\n          <>\n            <span className={SIDEBAR_STYLES.text}>{item.label}</span>\n            {item.badge && item.badge > 0 && (\n              <Badge variant=\"danger\" size=\"sm\" className={SIDEBAR_STYLES.badge}>\n                {item.badge > 9 ? '9+' : item.badge}\n              </Badge>\n            )}\n          </>\n        )}\n      </div>\n    );\n\n    return (\n      <div key={item.id}>\n        {collapsed ? (\n          <Tooltip content={item.label} side=\"right\">\n            <div>\n              {navItemContent}\n            </div>\n          </Tooltip>\n        ) : (\n          navItemContent\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <aside\n      className={`${SIDEBAR_STYLES.container} ${collapsed ? SIDEBAR_STYLES.collapsed : SIDEBAR_STYLES.expanded\n        }`}\n      aria-label=\"ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜\"\n      role=\"navigation\"\n    >\n      {/* ë¡œê³  */}\n      <div className={collapsed ? SIDEBAR_STYLES.logoCollapsed : SIDEBAR_STYLES.logoSection}>\n        {collapsed ? (\n          <div className=\"flex flex-col items-center gap-3 py-4\">\n            <div className={SIDEBAR_STYLES.logoIcon}>L</div>\n\n            {/* ì¶•ì†Œ ì‹œ ì‚¬ìš©ì í”„ë¡œí•„ - Google ê³„ì • ì •ë³´ í‘œì‹œ */}\n            <div\n              className=\"flex flex-col items-center gap-1 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-lg transition-colors mt-2\"\n              onClick={() => {\n                Logger.info('SIDEBAR', 'User profile clicked (collapsed)');\n                onNavigate?.('/settings');\n              }}\n              role=\"button\"\n              tabIndex={0}\n              aria-label=\"ì‚¬ìš©ì í”„ë¡œí•„\"\n            >\n              {!authLoaded && settingsLoading ? (\n                // loading skeleton\n                <div className=\"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse\" />\n              ) : (\n                <Avatar\n                  size=\"md\"\n                  src={avatarSrc || undefined}\n                  aria-label={(accountProfile?.displayName || accountProfile?.username || googleUserInfo?.userName || 'Loop ì‚¬ìš©ì')}\n                  className=\"border-2 border-white dark:border-slate-800 shadow-sm\"\n                >\n                  <span className=\"text-sm font-medium\">{(accountProfile?.displayName || accountProfile?.username || googleUserInfo?.userName || 'L').charAt(0).toUpperCase()}</span>\n                </Avatar>\n              )}\n              <div className={isOnline ? 'w-1.5 h-1.5 bg-green-500 rounded-full' : 'w-1.5 h-1.5 bg-gray-400 rounded-full'} />\n            </div>\n\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={SIDEBAR_STYLES.collapseButton}\n              onClick={handleToggleCollapse}\n              aria-label=\"ì‚¬ì´ë“œë°” í™•ì¥\"\n            >\n              <ChevronRight className=\"w-3 h-3\" />\n            </Button>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between w-full\">\n              <h1 className={SIDEBAR_STYLES.logoText}>Loop</h1>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className={SIDEBAR_STYLES.collapseButton}\n                onClick={handleToggleCollapse}\n                aria-label=\"ì‚¬ì´ë“œë°” ì¶•ì†Œ\"\n              >\n                <ChevronLeft className=\"w-3 h-3\" />\n              </Button>\n            </div>\n\n            {/* í™•ì¥ ì‹œ ì‚¬ìš©ì í”„ë¡œí•„: Google ê³„ì • ì •ë³´ ë…¸ì¶œ */}\n            <div\n              className=\"flex items-center gap-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-lg transition-colors\"\n              onClick={() => {\n                Logger.info('SIDEBAR', 'User profile clicked');\n                onNavigate?.('/settings');\n              }}\n              role=\"button\"\n              tabIndex={0}\n              aria-label=\"ì‚¬ìš©ì í”„ë¡œí•„\"\n            >\n              {!authLoaded && settingsLoading ? (\n                <div className=\"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse\" />\n              ) : (\n                <Avatar\n                  size=\"lg\"\n                  src={avatarSrc || undefined}\n                  aria-label={(accountProfile?.displayName || accountProfile?.username || googleUserInfo?.userName || 'Loop ì‚¬ìš©ì')}\n                  className=\"border-2 border-white dark:border-slate-800 shadow-sm\"\n                >\n                  <span className=\"text-lg font-medium\">{(accountProfile?.displayName || accountProfile?.username || googleUserInfo?.userName || 'L').charAt(0).toUpperCase()}</span>\n                </Avatar>\n              )}\n              <div className=\"flex-1\">\n                <div className=\"font-medium text-slate-900 dark:text-slate-100 text-sm\">{\n                  // skeleton for name until authLoaded\n                  !authLoaded && settingsLoading ? (\n                    <div className=\"h-4 w-28 bg-slate-200 dark:bg-slate-700 rounded animate-pulse\" />\n                  ) : (\n                    // Show display name from account settings, or fall back to email, or Loop ì‚¬ìš©ì\n                    (accountProfile?.displayName || accountProfile?.username || accountProfile?.email || (googleUserInfo?.isAuthenticated ? (googleUserInfo.userName || googleUserInfo.userEmail) : null) || 'Loop ì‚¬ìš©ì')\n                  )\n                }</div>\n                <div className=\"flex items-center gap-1 mt-0.5\">\n                  <div className={isOnline ? 'w-1.5 h-1.5 bg-green-500 rounded-full' : 'w-1.5 h-1.5 bg-gray-400 rounded-full'} />\n                  <span suppressHydrationWarning className=\"text-xs text-slate-500 dark:text-slate-400\">{\n                    !authLoaded ? 'ìƒíƒœ í™•ì¸ ì¤‘...' : (googleUserInfo?.isAuthenticated ? 'Google ê³„ì •' : (accountProfile?.displayName || accountProfile?.username || accountProfile?.email ? 'ë¡œì»¬ ê³„ì •' : (isOnline ? 'ì˜¨ë¼ì¸' : 'ì˜¤í”„ë¼ì¸')))\n                  }</span>\n                </div>\n                {visibleProfile && visibleProfile.isAuthenticated && visibleProfile.userEmail && (\n                  <div className=\"text-xs text-slate-500 dark:text-slate-400 mt-1 transition-opacity duration-200\">{visibleProfile.userEmail}</div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* ë„¤ë¹„ê²Œì´ì…˜ */}\n      <nav className={SIDEBAR_STYLES.navSection} aria-label=\"ë©”ì¸ ë©”ë‰´\">\n        <div className={SIDEBAR_STYLES.navList}>\n          {SIDEBAR_ITEMS.map(renderNavItem)}\n        </div>\n      </nav>\n    </aside>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1998, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/ui/Input.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef, useState, ReactNode, useId } from 'react';\nimport { Eye, EyeOff, Search, X } from 'lucide-react';\nimport { Logger } from '../../../shared/logger';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜\nconst INPUT_STYLES = {\n  base: 'flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-50 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus:ring-blue-400',\n  sizes: {\n    sm: 'h-8 text-xs',\n    md: 'h-10 text-sm',\n    lg: 'h-12 text-base',\n  },\n  variants: {\n    default: 'border-slate-300 focus:ring-blue-500',\n    error: 'border-red-300 focus:ring-red-500 focus:border-red-500',\n    success: 'border-green-300 focus:ring-green-500 focus:border-green-500',\n  },\n  withIcon: {\n    left: 'pl-10',\n    right: 'pr-10',\n  },\n  container: 'relative w-full',\n  iconContainer: {\n    left: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500',\n    right: 'absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500',\n  },\n  iconButton: 'absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 cursor-pointer transition-colors',\n} as const;\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\nexport interface InputProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'size'> {\n  readonly size?: keyof typeof INPUT_STYLES.sizes;\n  readonly variant?: keyof typeof INPUT_STYLES.variants;\n  readonly leftIcon?: ReactNode;\n  readonly rightIcon?: ReactNode;\n  readonly clearable?: boolean;\n  readonly label?: string;\n  readonly error?: string;\n  readonly helperText?: string;\n  readonly required?: boolean;\n  readonly onClear?: () => void;\n}\n\nfunction cn(...classes: (string | undefined | false | null)[]): string {\n  return classes.filter(Boolean).join(' ');\n}\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n  ({\n    className,\n    type = 'text',\n    size = 'md',\n    variant = 'default',\n    leftIcon,\n    rightIcon,\n    clearable = false,\n    label,\n    error,\n    helperText,\n    required = false,\n    disabled,\n    value,\n    onChange,\n    onClear,\n    ...props\n  }, ref) => {\n\n    const [showPassword, setShowPassword] = useState<boolean>(false);\n    const [focused, setFocused] = useState<boolean>(false);\n\n    const isPassword = type === 'password';\n    const hasValue = value !== undefined && value !== '';\n    const showClearButton = clearable && hasValue && !disabled;\n    const showPasswordToggle = isPassword && !disabled;\n\n    const inputClassName = cn(\n      INPUT_STYLES.base,\n      INPUT_STYLES.sizes[size],\n      INPUT_STYLES.variants[error ? 'error' : variant],\n      leftIcon ? INPUT_STYLES.withIcon.left : false,\n      (rightIcon || showClearButton || showPasswordToggle) ? INPUT_STYLES.withIcon.right : false,\n      className\n    );\n\n    const handleClear = (): void => {\n      if (onClear) {\n        onClear();\n      } else if (onChange) {\n        // í´ë¦¬ì–´ ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜\n        const event = {\n          target: { value: '' },\n          currentTarget: { value: '' },\n        } as React.ChangeEvent<HTMLInputElement>;\n        onChange(event);\n      }\n      Logger.debug('INPUT', 'Input cleared');\n    };\n\n    const togglePasswordVisibility = (): void => {\n      setShowPassword(!showPassword);\n      Logger.debug('INPUT', `Password visibility toggled: ${!showPassword}`);\n    };\n\n    const handleFocus = (event: React.FocusEvent<HTMLInputElement>): void => {\n      setFocused(true);\n      props.onFocus?.(event);\n    };\n\n    const handleBlur = (event: React.FocusEvent<HTMLInputElement>): void => {\n      setFocused(false);\n      props.onBlur?.(event);\n    };\n\n    const actualType = isPassword && showPassword ? 'text' : type;\n\n    const _uid = useId();\n    const labelId = label ? `input-${_uid}-label` : undefined;\n    const errorId = error ? `input-${_uid}-error` : undefined;\n    const helperId = helperText ? `input-${_uid}-helper` : undefined;\n\n    return (\n      <div className=\"w-full\">\n        {/* ë¼ë²¨ */}\n        {label && (\n          <label\n            id={labelId}\n            htmlFor={props.id}\n            className=\"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2\"\n          >\n            {label}\n            {required && <span className=\"text-red-500 ml-1\">*</span>}\n          </label>\n        )}\n\n        {/* Input Container */}\n        <div className={INPUT_STYLES.container}>\n          {/* ì¢Œì¸¡ ì•„ì´ì½˜ */}\n          {leftIcon && (\n            <div className={INPUT_STYLES.iconContainer.left}>\n              {leftIcon}\n            </div>\n          )}\n\n          {/* Input Field */}\n          <input\n            ref={ref}\n            type={actualType}\n            className={inputClassName}\n            disabled={disabled}\n            value={value}\n            onChange={onChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            aria-labelledby={labelId}\n            aria-describedby={cn(\n              errorId && errorId,\n              helperId && helperId\n            ) || undefined}\n            aria-invalid={!!error}\n            aria-required={required}\n            {...props}\n          />\n\n          {/* ìš°ì¸¡ ì•¡ì…˜ ë²„íŠ¼ë“¤ */}\n          <div className={INPUT_STYLES.iconContainer.right}>\n            <div className=\"flex items-center gap-1\">\n              {/* í´ë¦¬ì–´ ë²„íŠ¼ */}\n              {showClearButton && (\n                <button\n                  type=\"button\"\n                  className={cn(INPUT_STYLES.iconButton, 'p-0.5')}\n                  onClick={handleClear}\n                  aria-label=\"ì…ë ¥ ë‚´ìš© ì§€ìš°ê¸°\"\n                  tabIndex={-1}\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              )}\n\n              {/* íŒ¨ìŠ¤ì›Œë“œ í† ê¸€ */}\n              {showPasswordToggle && (\n                <button\n                  type=\"button\"\n                  className={cn(INPUT_STYLES.iconButton, 'p-0.5')}\n                  onClick={togglePasswordVisibility}\n                  aria-label={showPassword ? 'íŒ¨ìŠ¤ì›Œë“œ ìˆ¨ê¸°ê¸°' : 'íŒ¨ìŠ¤ì›Œë“œ ë³´ê¸°'}\n                  tabIndex={-1}\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-4 w-4\" />\n                  ) : (\n                    <Eye className=\"h-4 w-4\" />\n                  )}\n                </button>\n              )}\n\n              {/* ìš°ì¸¡ ì•„ì´ì½˜ */}\n              {rightIcon && !showClearButton && !showPasswordToggle && rightIcon}\n            </div>\n          </div>\n        </div>\n\n        {/* ì—ëŸ¬ ë©”ì‹œì§€ */}\n        {error && (\n          <p\n            id={errorId}\n            className=\"mt-2 text-sm text-red-600 dark:text-red-400\"\n            role=\"alert\"\n          >\n            {error}\n          </p>\n        )}\n\n        {/* ë„ì›€ë§ í…ìŠ¤íŠ¸ */}\n        {helperText && !error && (\n          <p\n            id={helperId}\n            className=\"mt-2 text-sm text-slate-500 dark:text-slate-400\"\n          >\n            {helperText}\n          </p>\n        )}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n\n// ğŸ”¥ ê²€ìƒ‰ ì „ìš© Input ì»´í¬ë„ŒíŠ¸\nexport const SearchInput = forwardRef<HTMLInputElement, Omit<InputProps, 'leftIcon' | 'type'>>(\n  (props, ref) => {\n    return (\n      <Input\n        ref={ref}\n        type=\"search\"\n        leftIcon={<Search className=\"h-4 w-4\" />}\n        placeholder=\"ê²€ìƒ‰...\"\n        clearable\n        {...props}\n      />\n    );\n  }\n);\n\nSearchInput.displayName = 'SearchInput';\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2255, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/ui/HydrationGuard.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ í•˜ì´ë“œë ˆì´ì…˜ ë³´í˜¸ ì»´í¬ë„ŒíŠ¸\ninterface HydrationGuardProps {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}\n\nexport function HydrationGuard({ children, fallback = null }: HydrationGuardProps): React.ReactElement {\n  const [isHydrated, setIsHydrated] = useState<boolean>(false);\n\n  useEffect(() => {\n    setIsHydrated(true);\n  }, []);\n\n  return <>{isHydrated ? children : fallback}</>;\n}\n\nexport default HydrationGuard;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS,eAAe,EAAE,QAAQ,EAAE,WAAW,IAAI,EAAuB;IAC/E,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAEtD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,cAAc;IAChB,GAAG,EAAE;IAEL,qBAAO;kBAAG,aAAa,WAAW;;AACpC;uCAEe","debugId":null}},
    {"offset": {"line": 2280, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/contexts/GlobalMonitoringContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useCallback, useLayoutEffect, useMemo } from 'react';\nimport { Logger } from '../../shared/logger';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\nexport interface MonitoringState {\n  isMonitoring: boolean;\n  isAIOpen: boolean;\n  startTime: Date | null;\n  sessionData: {\n    wpm: number;\n    words: number;\n    time: number;\n  };\n}\n\nexport interface MonitoringContextType {\n  state: MonitoringState;\n  startMonitoring: () => Promise<void>;\n  stopMonitoring: () => Promise<void>;\n  toggleAI: () => void;\n  updateSessionData: (data: Partial<MonitoringState['sessionData']>) => void;\n}\n\n// ğŸ”¥ ì»¨í…ìŠ¤íŠ¸ ìƒì„±\nexport const MonitoringContext = createContext<MonitoringContextType | undefined>(undefined);\n\n// ğŸ”¥ ì´ˆê¸° ìƒíƒœ ìƒìˆ˜í™” (ë©”ëª¨ë¦¬ ìµœì í™”)\nconst INITIAL_STATE: MonitoringState = {\n  isMonitoring: false,\n  isAIOpen: false,\n  startTime: null,\n  sessionData: {\n    wpm: 0,\n    words: 0,\n    time: 0,\n  },\n} as const;\n\n// ğŸ”¥ í”„ë¡œë°”ì´ë” ì»´í¬ë„ŒíŠ¸\nexport function MonitoringProvider({ children }: { children: React.ReactNode }): React.ReactElement {\n  // ğŸ”¥ í•˜ì´ë“œë ˆì´ì…˜ ë¶ˆì¼ì¹˜ ì™„ì „ í•´ê²°: ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ë™ì¼í•œ ì´ˆê¸°ê°’\n  const [state, setState] = useState<MonitoringState>(INITIAL_STATE);\n\n  // ğŸ”¥ í´ë¼ì´ì–¸íŠ¸ ë§ˆìš´íŠ¸ í›„ localStorageì—ì„œ ìƒíƒœ ë³µì› (ëª¨ë‹ˆí„°ë§ì€ í•­ìƒ falseë¡œ ì‹œì‘)\n  useLayoutEffect(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        const savedState = localStorage.getItem('monitoring-state');\n        if (savedState) {\n          const parsed = JSON.parse(savedState);\n          setState(prev => ({\n            ...prev,\n            // ğŸ”¥ ëª¨ë‹ˆí„°ë§ì€ í•­ìƒ falseë¡œ ì‹œì‘ (ì‚¬ìš©ì ìˆ˜ë™ ì‹œì‘ ì›ì¹™)\n            isMonitoring: false, \n            isAIOpen: parsed.isAIOpen || false,\n            startTime: null, // ì‹œì‘ ì‹œê°„ë„ ì´ˆê¸°í™”\n            sessionData: {\n              ...prev.sessionData,\n              ...parsed.sessionData,\n            },\n          }));\n          Logger.debug('MONITORING_CONTEXT', 'State restored from localStorage (monitoring disabled)', { ...parsed, isMonitoring: false });\n        }\n      } catch (error) {\n        Logger.error('MONITORING_CONTEXT', 'Failed to load state from localStorage', error);\n      }\n    }\n  }, []);\n\n  // ğŸ”¥ ìƒíƒœ ë³€ê²½ ì‹œ localStorageì— ì €ì¥ (ì¦‰ì‹œ ì‹¤í–‰) - ë””ë°”ìš´ìŠ¤ ì ìš©\n  useLayoutEffect(() => {\n    if (typeof window !== 'undefined') {\n      const timeoutId = setTimeout(() => {\n        try {\n          localStorage.setItem('monitoring-state', JSON.stringify(state));\n          Logger.debug('MONITORING_CONTEXT', 'State saved to localStorage', state);\n        } catch (error) {\n          Logger.error('MONITORING_CONTEXT', 'Failed to save state to localStorage', error);\n        }\n      }, 100); // 100ms ë””ë°”ìš´ìŠ¤\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [state]);\n\n  const startMonitoring = useCallback(async (): Promise<void> => {\n    try {\n      Logger.info('MONITORING_CONTEXT', 'ğŸš€ ëª¨ë‹ˆí„°ë§ ì‹œì‘ ìš”ì²­');\n      \n      // ğŸ”¥ ë²„íŠ¼ ê¹œë¹¡ì„ ë°©ì§€: ì¦‰ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸ (ë‚™ê´€ì  ì—…ë°ì´íŠ¸)\n      setState(prev => ({\n        ...prev,\n        isMonitoring: true,\n        startTime: new Date(),\n      }));\n      \n      // ğŸ”¥ ë°±ì—”ë“œ ìš”ì²­\n      const result = await window.electronAPI.keyboard.startMonitoring();\n      if (!result.success) {\n        // ğŸ”¥ ì‹¤íŒ¨ ì‹œ ìƒíƒœ ë¡¤ë°±\n        setState(prev => ({\n          ...prev,\n          isMonitoring: false,\n          startTime: null,\n        }));\n        \n        // ğŸ”¥ ê¶Œí•œ ê´€ë ¨ ì—ëŸ¬ì¸ì§€ í™•ì¸\n        const isPermissionError = result.error && (\n          result.error.includes('ê¶Œí•œ') || \n          result.error.includes('permission') ||\n          result.error.includes('accessibility')\n        );\n        \n        if (isPermissionError) {\n          Logger.warn('MONITORING_CONTEXT', 'âš ï¸ ê¶Œí•œ í•„ìš”:', result.error);\n          // TODO: ê¶Œí•œ ìš”ì²­ ëª¨ë‹¬ í‘œì‹œ\n          alert(`ì ‘ê·¼ì„± ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.\\n\\nì‹œìŠ¤í…œ ì„¤ì • â†’ ë³´ì•ˆ ë° ê°œì¸ì •ë³´ë³´í˜¸ â†’ ê°œì¸ì •ë³´ë³´í˜¸ â†’ ì ‘ê·¼ì„±\\nì—ì„œ Loop ì•±ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.`);\n        } else {\n          Logger.error('MONITORING_CONTEXT', 'âŒ ëª¨ë‹ˆí„°ë§ ì‹œì‘ ì‹¤íŒ¨:', result.error);\n        }\n        \n        throw new Error(result.error || 'Failed to start monitoring');\n      }\n      \n      Logger.info('MONITORING_CONTEXT', 'âœ… ëª¨ë‹ˆí„°ë§ ì‹œì‘ ì„±ê³µ!');\n    } catch (error) {\n      Logger.error('MONITORING_CONTEXT', 'Error starting monitoring', error);\n      \n      // ğŸ”¥ ì—ëŸ¬ ì‹œ ìƒíƒœ ë¡¤ë°± í™•ì‹¤íˆ ì‹¤í–‰\n      setState(prev => ({\n        ...prev,\n        isMonitoring: false,\n        startTime: null,\n      }));\n      \n      throw error;\n    }\n  }, []);\n\n  const stopMonitoring = useCallback(async (): Promise<void> => {\n    try {\n      Logger.info('MONITORING_CONTEXT', 'Stopping monitoring');\n      \n      // ğŸ”¥ ë²„íŠ¼ ê¹œë¹¡ì„ ë°©ì§€: ì¦‰ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸\n      setState(prev => ({\n        ...prev,\n        isMonitoring: false,\n        startTime: null,\n      }));\n      \n      const result = await window.electronAPI.keyboard.stopMonitoring();\n      if (!result.success) {\n        // ì‹¤íŒ¨ ì‹œ ìƒíƒœ ë¡¤ë°±\n        setState(prev => ({\n          ...prev,\n          isMonitoring: true,\n          startTime: new Date(),\n        }));\n        Logger.error('MONITORING_CONTEXT', 'Failed to stop monitoring', result.error);\n        throw new Error(result.error || 'Failed to stop monitoring');\n      }\n      \n      Logger.info('MONITORING_CONTEXT', 'Monitoring stopped successfully');\n    } catch (error) {\n      // ì—ëŸ¬ ì‹œ ìƒíƒœ ë¡¤ë°± (ëª¨ë‹ˆí„°ë§ ì¬ê°œ)\n      setState(prev => ({\n        ...prev,\n        isMonitoring: true,\n        startTime: new Date(),\n      }));\n      Logger.error('MONITORING_CONTEXT', 'Error stopping monitoring', error);\n      throw error;\n    }\n  }, []);\n\n  const toggleAI = useCallback((): void => {\n    setState(prev => ({\n      ...prev,\n      isAIOpen: !prev.isAIOpen,\n    }));\n    Logger.info('MONITORING_CONTEXT', 'AI Panel toggled');\n  }, []);\n\n  const updateSessionData = useCallback((data: Partial<MonitoringState['sessionData']>): void => {\n    setState(prev => ({\n      ...prev,\n      sessionData: {\n        ...prev.sessionData,\n        ...data,\n      },\n    }));\n  }, []);\n\n  // ğŸ”¥ ì»¨í…ìŠ¤íŠ¸ ê°’ ë©”ëª¨í™” (ì„±ëŠ¥ ìµœì í™”)\n  const contextValue = useMemo<MonitoringContextType>(() => ({\n    state,\n    startMonitoring,\n    stopMonitoring,\n    toggleAI,\n    updateSessionData,\n  }), [state, startMonitoring, stopMonitoring, toggleAI, updateSessionData]);\n\n  return (\n    <MonitoringContext.Provider value={contextValue}>\n      {children}\n    </MonitoringContext.Provider>\n  );\n}\n\n// ğŸ”¥ ì»¤ìŠ¤í…€ í›…\nexport function useMonitoring(): MonitoringContextType {\n  const context = useContext(MonitoringContext);\n  if (context === undefined) {\n    throw new Error('useMonitoring must be used within a MonitoringProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2446, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/components/layout/AppHeader.tsx"],"sourcesContent":["'use client';\n\nimport { Bell, Search, User, Menu, Activity } from 'lucide-react';\nimport { Button } from '../ui/Button';\nimport { SearchInput } from '../ui/Input';\nimport { Avatar } from '../ui/Avatar';\nimport { Badge } from '../ui/Badge';\nimport { HydrationGuard } from '../ui/HydrationGuard';\nimport { useState } from 'react';\nimport { Logger } from '../../../shared/logger';\nimport { useMonitoring } from '../../contexts/GlobalMonitoringContext';\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼ ìƒìˆ˜ - macOS ìŠ¤íƒ€ì¼\nconst HEADER_STYLES = {\n  container: 'h-16 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200/50 dark:border-slate-700/50 flex items-center justify-between px-6 z-80 supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-slate-900/60',\n  leftSection: 'flex items-center space-x-4 min-w-0',\n  menuButton: 'lg:hidden',\n  // make search responsive: full width on small screens, flexible on md+ with sensible min/max to avoid overflow\n  searchContainer: 'relative hidden md:block md:flex-1 md:min-w-[260px] md:max-w-md w-full max-w-full min-w-0',\n  rightSection: 'flex items-center space-x-3',\n  notificationButton: 'relative',\n  userSection: 'flex items-center space-x-2',\n  userName: 'hidden sm:block font-medium text-slate-900 dark:text-slate-100',\n} as const;\n\n// ğŸ”¥ ê¸°ê°€ì°¨ë“œ ê·œì¹™: ëª…ì‹œì  íƒ€ì… ì •ì˜\ninterface AppHeaderProps {\n  readonly onMenuToggle?: () => void;\n  readonly user?: {\n    readonly name: string;\n    readonly avatar?: string;\n    readonly status?: 'online' | 'away' | 'busy' | 'offline';\n  };\n  readonly notificationCount?: number;\n  readonly onSearch?: (query: string) => void;\n  readonly onNotificationClick?: () => void;\n  readonly onUserClick?: () => void;\n}\n\nexport function AppHeader({\n  onMenuToggle,\n  user,\n  notificationCount = 0,\n  onSearch,\n  onNotificationClick,\n  onUserClick,\n}: AppHeaderProps): React.ReactElement {\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const { state } = useMonitoring();\n  const { isMonitoring } = state;\n\n  const handleSearch = (event: React.FormEvent<HTMLFormElement>): void => {\n    event.preventDefault();\n    if (searchQuery.trim()) {\n      Logger.info('HEADER', 'Search performed', { query: searchQuery });\n      onSearch?.(searchQuery.trim());\n    }\n  };\n\n  const handleSearchChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setSearchQuery(event.target.value);\n  };\n\n  const handleNotificationClick = (): void => {\n    Logger.info('HEADER', 'Notifications clicked', { count: notificationCount });\n    onNotificationClick?.();\n  };\n\n  const handleUserClick = (): void => {\n    Logger.info('HEADER', 'User menu clicked', { user: user?.name || 'anonymous' });\n    onUserClick?.();\n  };\n\n  const handleMenuToggle = (): void => {\n    Logger.info('HEADER', 'Menu toggle clicked');\n    onMenuToggle?.();\n  };\n\n  return (\n    <header className={HEADER_STYLES.container} role=\"banner\">\n      {/* ì¢Œì¸¡ ì„¹ì…˜ */}\n      <div className={HEADER_STYLES.leftSection}>\n        {/* ëª¨ë°”ì¼ ë©”ë‰´ ë²„íŠ¼ */}\n        {onMenuToggle && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className={HEADER_STYLES.menuButton}\n            onClick={handleMenuToggle}\n            aria-label=\"ë©”ë‰´ í† ê¸€\"\n          >\n            <Menu className=\"w-5 h-5\" />\n          </Button>\n        )}\n\n        {/* ê²€ìƒ‰ */}\n        <div className={HEADER_STYLES.searchContainer}>\n          <form onSubmit={handleSearch}>\n            <SearchInput\n              placeholder=\"í”„ë¡œì íŠ¸, íŒŒì¼ ê²€ìƒ‰...\"\n              value={searchQuery}\n              onChange={handleSearchChange}\n              aria-label=\"ê²€ìƒ‰ì–´ ì…ë ¥\"\n            />\n          </form>\n        </div>\n      </div>\n\n      {/* ìš°ì¸¡ ì„¹ì…˜ */}\n      <div className={HEADER_STYLES.rightSection}>\n        {/* ëª¨ë‹ˆí„°ë§ ìƒíƒœ í‘œì‹œ */}\n        <HydrationGuard fallback={null}>\n          {isMonitoring && (\n            <div className=\"flex items-center gap-2 px-3 py-1.5 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-sm\">\n              <Activity className=\"w-4 h-4 animate-pulse\" />\n              <span className=\"font-medium\">ëª¨ë‹ˆí„°ë§ ì¤‘</span>\n            </div>\n          )}\n        </HydrationGuard>\n\n        {/* ì•Œë¦¼ ë²„íŠ¼ */}\n        <div className={HEADER_STYLES.notificationButton}>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleNotificationClick}\n            aria-label={`ì•Œë¦¼ ${notificationCount}ê°œ`}\n          >\n            <Bell className=\"w-5 h-5\" />\n          </Button>\n          {notificationCount > 0 && (\n            <Badge\n              variant=\"danger\"\n              size=\"sm\"\n              className=\"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 text-xs\"\n            >\n              {notificationCount > 9 ? '9+' : notificationCount}\n            </Badge>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;AAYA,wCAAwC;AACxC,MAAM,gBAAgB;IACpB,WAAW;IACX,aAAa;IACb,YAAY;IACZ,+GAA+G;IAC/G,iBAAiB;IACjB,cAAc;IACd,oBAAoB;IACpB,aAAa;IACb,UAAU;AACZ;AAgBO,SAAS,UAAU,EACxB,YAAY,EACZ,IAAI,EACJ,oBAAoB,CAAC,EACrB,QAAQ,EACR,mBAAmB,EACnB,WAAW,EACI;IACf,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACvD,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD;IAC9B,MAAM,EAAE,YAAY,EAAE,GAAG;IAEzB,MAAM,eAAe,CAAC;QACpB,MAAM,cAAc;QACpB,IAAI,YAAY,IAAI,IAAI;YACtB,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,UAAU,oBAAoB;gBAAE,OAAO;YAAY;YAC/D,WAAW,YAAY,IAAI;QAC7B;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,eAAe,MAAM,MAAM,CAAC,KAAK;IACnC;IAEA,MAAM,0BAA0B;QAC9B,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,UAAU,yBAAyB;YAAE,OAAO;QAAkB;QAC1E;IACF;IAEA,MAAM,kBAAkB;QACtB,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,UAAU,qBAAqB;YAAE,MAAM,MAAM,QAAQ;QAAY;QAC7E;IACF;IAEA,MAAM,mBAAmB;QACvB,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,UAAU;QACtB;IACF;IAEA,qBACE,8OAAC;QAAO,WAAW,cAAc,SAAS;QAAE,MAAK;;0BAE/C,8OAAC;gBAAI,WAAW,cAAc,WAAW;;oBAEtC,8BACC,8OAAC,8IAAA,CAAA,SAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,WAAW,cAAc,UAAU;wBACnC,SAAS;wBACT,cAAW;kCAEX,cAAA,8OAAC,kMAAA,CAAA,OAAI;4BAAC,WAAU;;;;;;;;;;;kCAKpB,8OAAC;wBAAI,WAAW,cAAc,eAAe;kCAC3C,cAAA,8OAAC;4BAAK,UAAU;sCACd,cAAA,8OAAC,6IAAA,CAAA,cAAW;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU;gCACV,cAAW;;;;;;;;;;;;;;;;;;;;;;0BAOnB,8OAAC;gBAAI,WAAW,cAAc,YAAY;;kCAExC,8OAAC,sJAAA,CAAA,iBAAc;wBAAC,UAAU;kCACvB,8BACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,0MAAA,CAAA,WAAQ;oCAAC,WAAU;;;;;;8CACpB,8OAAC;oCAAK,WAAU;8CAAc;;;;;;;;;;;;;;;;;kCAMpC,8OAAC;wBAAI,WAAW,cAAc,kBAAkB;;0CAC9C,8OAAC,8IAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,cAAY,CAAC,GAAG,EAAE,kBAAkB,CAAC,CAAC;0CAEtC,cAAA,8OAAC,kMAAA,CAAA,OAAI;oCAAC,WAAU;;;;;;;;;;;4BAEjB,oBAAoB,mBACnB,8OAAC,6IAAA,CAAA,QAAK;gCACJ,SAAQ;gCACR,MAAK;gCACL,WAAU;0CAET,oBAAoB,IAAI,OAAO;;;;;;;;;;;;;;;;;;;;;;;;AAO9C","debugId":null}},
    {"offset": {"line": 2658, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/providers/ThemeProvider.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport { Logger } from '../../shared/logger';\n\n// ğŸ”¥ í…Œë§ˆ íƒ€ì… ì •ì˜\nexport type Theme = 'light' | 'dark' | 'system';\n\ninterface ThemeContextType {\n  theme: Theme;\n  resolvedTheme: 'light' | 'dark'; // ì‹¤ì œ ì ìš©ëœ í…Œë§ˆ (system í•´ê²°ë¨)\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n}\n\n// ğŸ”¥ Context ìƒì„±\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\n// ğŸ”¥ í”„ë¦¬ì»´íŒŒì¼ëœ ìŠ¤íƒ€ì¼\nconst THEME_STYLES = {\n  root: 'transition-colors duration-200',\n} as const;\n\ninterface ThemeProviderProps {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n}\n\nexport function ThemeProvider({ children, defaultTheme = 'system' }: ThemeProviderProps): React.ReactElement {\n  const [theme, setThemeState] = useState<Theme>(() => {\n    // ğŸ”¥ í•˜ì´ë“œë ˆì´ì…˜ ì•ˆì „: ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°ê°’ ì™„ì „ ë™ê¸°í™”\n    return defaultTheme; // í•­ìƒ 'system'ìœ¼ë¡œ ì‹œì‘ (ì„œë²„ì™€ ë™ì¼)\n  });\n\n  // í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸° ë Œë”ì—ì„œ ì„œë²„ê°€ ë„£ì–´ë‘” HTML ì†ì„±(data-theme / class)ì„ ìš°ì„  ì½ì–´\n  // ì´ˆê¸°ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ hydration mismatchë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.\n  // ì´ˆê¸°ê°’ì€ ì„œë²„ê°€ ì‚½ì…í•œ HTML ì†ì„±(data-theme/class)ì„ ìš°ì„  ì‚¬ìš©í•©ë‹ˆë‹¤.\n  // ì‹œìŠ¤í…œ í”„ë¦¬í¼ëŸ°ìŠ¤(matchMedia)ëŠ” í´ë¼ì´ì–¸íŠ¸ ë§ˆìš´íŠ¸ ì´í›„ì—ë§Œ ì ìš©í•©ë‹ˆë‹¤.\n  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>(() => {\n    if (typeof window === 'undefined') return 'light';\n    try {\n      const html = document.documentElement;\n      const dataTheme = html.getAttribute('data-theme');\n      if (dataTheme === 'dark' || dataTheme === 'light') return dataTheme as 'light' | 'dark';\n      if (html.classList.contains('dark')) return 'dark';\n      if (html.classList.contains('light')) return 'light';\n      // ì•„ë¬´ ì„¤ì •ì´ ì—†ìœ¼ë©´ ì„œë²„ ê¸°ë³¸ê³¼ ë™ì¼í•˜ê²Œ 'light'ë¡œ ì‹œì‘\n      return 'light';\n    } catch (e) {\n      return 'light';\n    }\n  });\n\n  // ğŸ”¥ ì‹œìŠ¤í…œ í…Œë§ˆ ê°ì§€\n  const getSystemTheme = useCallback((): 'light' | 'dark' => {\n    if (typeof window === 'undefined') return 'light';\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  }, []);\n\n  // ğŸ”¥ í•´ê²°ëœ í…Œë§ˆ ê³„ì‚°\n  const calculateResolvedTheme = useCallback((currentTheme: Theme): 'light' | 'dark' => {\n    if (currentTheme === 'system') {\n      return getSystemTheme();\n    }\n    return currentTheme;\n  }, [getSystemTheme]);\n\n  // ğŸ”¥ í…Œë§ˆ ì„¤ì • í•¨ìˆ˜\n  const setTheme = useCallback(async (newTheme: Theme): Promise<void> => {\n    try {\n      Logger.info('THEME_PROVIDER', 'Theme changing', { from: theme, to: newTheme });\n\n      setThemeState(newTheme);\n      const resolved = calculateResolvedTheme(newTheme);\n      setResolvedTheme(resolved);\n\n      // ğŸ”¥ ë°±ì—”ë“œì— í…Œë§ˆ ì €ì¥\n      try {\n        const result = await window.electronAPI.settings.set('theme', newTheme);\n        if (result.success) {\n          Logger.info('THEME_PROVIDER', 'Theme saved to backend', { theme: newTheme, resolved });\n        } else {\n          Logger.warn('THEME_PROVIDER', 'Failed to save theme to backend', result.error);\n        }\n      } catch (error) {\n        Logger.error('THEME_PROVIDER', 'Error saving theme to backend', error);\n      }\n\n      // ğŸ”¥ HTML/Body ì†ì„± ë° í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸ (ì¦‰ì‹œ)\n      const root = document.documentElement;\n      const body = document.body;\n      root.classList.remove('light', 'dark');\n      root.classList.add(resolved);\n      root.setAttribute('data-theme', resolved);\n      (root.style as CSSStyleDeclaration).colorScheme = resolved;\n      if (body) {\n        body.setAttribute('data-theme', resolved);\n        (body.style as CSSStyleDeclaration).colorScheme = resolved;\n      }\n\n      // ğŸ”¥ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ë„ ì €ì¥ (ë°±ì—…)\n      localStorage.setItem('loop-theme', newTheme);\n\n      Logger.info('THEME_PROVIDER', 'Theme applied successfully', {\n        theme: newTheme,\n        resolved,\n        htmlClass: root.className\n      });\n    } catch (error) {\n      Logger.error('THEME_PROVIDER', 'Error setting theme', error);\n    }\n  }, [theme, calculateResolvedTheme]);\n\n  // ğŸ”¥ í…Œë§ˆ í† ê¸€ í•¨ìˆ˜\n  const toggleTheme = useCallback((): void => {\n    const newTheme = resolvedTheme === 'light' ? 'dark' : 'light';\n    setTheme(newTheme);\n  }, [resolvedTheme, setTheme]);\n\n  // ğŸ”¥ ì´ˆê¸° í…Œë§ˆ ë¡œë“œ (ê¹œë¹¡ì„ ë°©ì§€ - ë¸”ë¡œí‚¹ ìŠ¤í¬ë¦½íŠ¸ì™€ ì™„ì „ ë™ê¸°í™”)\n  useEffect(() => {\n    const loadInitialTheme = async (): Promise<void> => {\n      try {\n        // ğŸ”¥ ë¸”ë¡œí‚¹ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì´ë¯¸ HTML í´ë˜ìŠ¤ê°€ ì„¤ì •ë˜ì—ˆìœ¼ë¯€ë¡œ ìƒíƒœë§Œ ë™ê¸°í™”\n        const htmlElement = document.documentElement;\n        let currentResolvedTheme: 'light' | 'dark' = 'light';\n\n        // HTML í´ë˜ìŠ¤ì—ì„œ í˜„ì¬ í…Œë§ˆ ê°ì§€\n        if (htmlElement.classList.contains('dark')) {\n          currentResolvedTheme = 'dark';\n        } else if (htmlElement.classList.contains('light')) {\n          currentResolvedTheme = 'light';\n        }\n\n        // data-theme ì†ì„±ë„ í™•ì¸\n        const dataTheme = htmlElement.getAttribute('data-theme');\n        if (dataTheme === 'dark' || dataTheme === 'light') {\n          currentResolvedTheme = dataTheme;\n        }\n\n        // 1. ë°±ì—”ë“œì—ì„œ í…Œë§ˆ ê°€ì ¸ì˜¤ê¸° ì‹œë„ (ë¹„ë™ê¸°)\n        let savedTheme: Theme = defaultTheme;\n        let themeSource = 'default';\n\n        try {\n          if (window.electronAPI?.settings?.get) {\n            const result = await window.electronAPI.settings.get('theme');\n            if (result.success && result.data) {\n              const themeValue = result.data as Theme;\n              if (['light', 'dark', 'system'].includes(themeValue)) {\n                savedTheme = themeValue;\n                themeSource = 'backend';\n                Logger.info('THEME_PROVIDER', 'Theme loaded from backend', { theme: savedTheme });\n              }\n            }\n          }\n        } catch (error) {\n          Logger.warn('THEME_PROVIDER', 'Backend not available, using localStorage', error);\n\n          // 2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í´ë°±\n          try {\n            const localTheme = localStorage.getItem('loop-theme') as Theme;\n            if (localTheme && ['light', 'dark', 'system'].includes(localTheme)) {\n              savedTheme = localTheme;\n              themeSource = 'localStorage';\n              Logger.info('THEME_PROVIDER', 'Theme loaded from localStorage', { theme: savedTheme });\n            }\n          } catch (error) {\n            Logger.warn('THEME_PROVIDER', 'localStorage not available', error);\n          }\n        }\n\n        // 3. ìƒíƒœ ë™ê¸°í™” (HTML í´ë˜ìŠ¤ëŠ” ì´ë¯¸ ì„¤ì •ë¨)\n        if (savedTheme !== theme) {\n          setThemeState(savedTheme);\n        }\n\n        const resolved = calculateResolvedTheme(savedTheme);\n\n        // 4. í˜„ì¬ HTMLê³¼ ê³„ì‚°ëœ í…Œë§ˆê°€ ë‹¤ë¥´ë©´ ë™ê¸°í™”\n        if (resolved !== currentResolvedTheme) {\n          setResolvedTheme(resolved);\n          htmlElement.classList.remove('light', 'dark');\n          htmlElement.classList.add(resolved);\n          htmlElement.setAttribute('data-theme', resolved);\n          htmlElement.style.setProperty('color-scheme', resolved);\n          document.body?.setAttribute('data-theme', resolved);\n          document.body?.style.setProperty('color-scheme', resolved);\n          Logger.info('THEME_PROVIDER', 'Theme synchronized with calculation', {\n            calculated: resolved,\n            current: currentResolvedTheme\n          });\n        } else {\n          // ì´ë¯¸ ì˜¬ë°”ë¥¸ í…Œë§ˆê°€ ì ìš©ë¨\n          setResolvedTheme(currentResolvedTheme);\n          // ë³´ìˆ˜ì ìœ¼ë¡œ bodyì—ë„ ë™ì¼ ì†ì„± ë³´ê°•\n          htmlElement.setAttribute('data-theme', currentResolvedTheme);\n          htmlElement.style.setProperty('color-scheme', currentResolvedTheme);\n          document.body?.setAttribute('data-theme', currentResolvedTheme);\n          document.body?.style.setProperty('color-scheme', currentResolvedTheme);\n          Logger.debug('THEME_PROVIDER', 'Theme already synchronized', {\n            theme: savedTheme,\n            resolved: currentResolvedTheme\n          });\n        }\n\n        Logger.info('THEME_PROVIDER', 'Initial theme loaded successfully', {\n          theme: savedTheme,\n          resolved,\n          source: themeSource,\n          htmlClasses: htmlElement.className\n        });\n      } catch (error) {\n        Logger.error('THEME_PROVIDER', 'Error loading initial theme', error);\n        // ì—ëŸ¬ ì‹œ ì•ˆì „í•œ í´ë°±\n        const root = document.documentElement;\n        const body = document.body;\n        root.classList.remove('light', 'dark');\n        root.classList.add('light');\n        root.setAttribute('data-theme', 'light');\n        root.style.setProperty('color-scheme', 'light');\n        if (body) {\n          body.setAttribute('data-theme', 'light');\n          body.style.setProperty('color-scheme', 'light');\n        }\n        setResolvedTheme('light');\n      }\n    };\n\n    // ğŸ”¥ ì¦‰ì‹œ ì‹¤í–‰ (ë¸”ë¡œí‚¹ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ê¸°í™”)\n    loadInitialTheme();\n  }, []); // ğŸ”¥ ì˜ì¡´ì„± ë°°ì—´ì„ ë¹„ì›Œì„œ í•œ ë²ˆë§Œ ì‹¤í–‰\n\n  // ğŸ”¥ ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ê°ì§€\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n\n    const handleSystemThemeChange = (): void => {\n      if (theme === 'system') {\n        const newResolved = getSystemTheme();\n        setResolvedTheme(newResolved);\n\n        // HTML/Body í´ë˜ìŠ¤ ë° ì†ì„± ì—…ë°ì´íŠ¸\n        const root = document.documentElement;\n        const body = document.body;\n        root.classList.remove('light', 'dark');\n        root.classList.add(newResolved);\n        root.setAttribute('data-theme', newResolved);\n        root.style.setProperty('color-scheme', newResolved);\n        if (body) {\n          body.setAttribute('data-theme', newResolved);\n          body.style.setProperty('color-scheme', newResolved);\n        }\n\n        Logger.info('THEME_PROVIDER', 'System theme changed', {\n          theme: 'system',\n          resolved: newResolved\n        });\n      }\n    };\n\n    mediaQuery.addEventListener('change', handleSystemThemeChange);\n    return () => mediaQuery.removeEventListener('change', handleSystemThemeChange);\n  }, [theme, getSystemTheme]);\n\n  const contextValue: ThemeContextType = {\n    theme,\n    resolvedTheme,\n    setTheme,\n    toggleTheme,\n  };\n\n  return (\n    <ThemeContext.Provider value={contextValue}>\n      <div className={THEME_STYLES.root} suppressHydrationWarning>\n        {children}\n      </div>\n    </ThemeContext.Provider>\n  );\n}\n\n// ğŸ”¥ ì»¤ìŠ¤í…€ í›…\nexport function useTheme(): ThemeContextType {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAeA,gBAAgB;AAChB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAgC;AAEjE,gBAAgB;AAChB,MAAM,eAAe;IACnB,MAAM;AACR;AAOO,SAAS,cAAc,EAAE,QAAQ,EAAE,eAAe,QAAQ,EAAsB;IACrF,MAAM,CAAC,OAAO,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAS;QAC7C,qCAAqC;QACrC,OAAO,cAAc,4BAA4B;IACnD;IAEA,2DAA2D;IAC3D,wCAAwC;IACxC,oDAAoD;IACpD,+CAA+C;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAoB;QACnE,wCAAmC,OAAO;;IAY5C;IAEA,eAAe;IACf,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACjC,wCAAmC,OAAO;;IAE5C,GAAG,EAAE;IAEL,eAAe;IACf,MAAM,yBAAyB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAC1C,IAAI,iBAAiB,UAAU;YAC7B,OAAO;QACT;QACA,OAAO;IACT,GAAG;QAAC;KAAe;IAEnB,cAAc;IACd,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAClC,IAAI;YACF,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,kBAAkB;gBAAE,MAAM;gBAAO,IAAI;YAAS;YAE5E,cAAc;YACd,MAAM,WAAW,uBAAuB;YACxC,iBAAiB;YAEjB,gBAAgB;YAChB,IAAI;gBACF,MAAM,SAAS,MAAM,OAAO,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS;gBAC9D,IAAI,OAAO,OAAO,EAAE;oBAClB,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,0BAA0B;wBAAE,OAAO;wBAAU;oBAAS;gBACtF,OAAO;oBACL,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,mCAAmC,OAAO,KAAK;gBAC/E;YACF,EAAE,OAAO,OAAO;gBACd,uHAAA,CAAA,SAAM,CAAC,KAAK,CAAC,kBAAkB,iCAAiC;YAClE;YAEA,kCAAkC;YAClC,MAAM,OAAO,SAAS,eAAe;YACrC,MAAM,OAAO,SAAS,IAAI;YAC1B,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;YAC/B,KAAK,SAAS,CAAC,GAAG,CAAC;YACnB,KAAK,YAAY,CAAC,cAAc;YAC/B,KAAK,KAAK,CAAyB,WAAW,GAAG;YAClD,IAAI,MAAM;gBACR,KAAK,YAAY,CAAC,cAAc;gBAC/B,KAAK,KAAK,CAAyB,WAAW,GAAG;YACpD;YAEA,uBAAuB;YACvB,aAAa,OAAO,CAAC,cAAc;YAEnC,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,8BAA8B;gBAC1D,OAAO;gBACP;gBACA,WAAW,KAAK,SAAS;YAC3B;QACF,EAAE,OAAO,OAAO;YACd,uHAAA,CAAA,SAAM,CAAC,KAAK,CAAC,kBAAkB,uBAAuB;QACxD;IACF,GAAG;QAAC;QAAO;KAAuB;IAElC,cAAc;IACd,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAC9B,MAAM,WAAW,kBAAkB,UAAU,SAAS;QACtD,SAAS;IACX,GAAG;QAAC;QAAe;KAAS;IAE5B,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,mBAAmB;YACvB,IAAI;gBACF,6CAA6C;gBAC7C,MAAM,cAAc,SAAS,eAAe;gBAC5C,IAAI,uBAAyC;gBAE7C,sBAAsB;gBACtB,IAAI,YAAY,SAAS,CAAC,QAAQ,CAAC,SAAS;oBAC1C,uBAAuB;gBACzB,OAAO,IAAI,YAAY,SAAS,CAAC,QAAQ,CAAC,UAAU;oBAClD,uBAAuB;gBACzB;gBAEA,oBAAoB;gBACpB,MAAM,YAAY,YAAY,YAAY,CAAC;gBAC3C,IAAI,cAAc,UAAU,cAAc,SAAS;oBACjD,uBAAuB;gBACzB;gBAEA,4BAA4B;gBAC5B,IAAI,aAAoB;gBACxB,IAAI,cAAc;gBAElB,IAAI;oBACF,IAAI,OAAO,WAAW,EAAE,UAAU,KAAK;wBACrC,MAAM,SAAS,MAAM,OAAO,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC;wBACrD,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;4BACjC,MAAM,aAAa,OAAO,IAAI;4BAC9B,IAAI;gCAAC;gCAAS;gCAAQ;6BAAS,CAAC,QAAQ,CAAC,aAAa;gCACpD,aAAa;gCACb,cAAc;gCACd,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,6BAA6B;oCAAE,OAAO;gCAAW;4BACjF;wBACF;oBACF;gBACF,EAAE,OAAO,OAAO;oBACd,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,6CAA6C;oBAE3E,gBAAgB;oBAChB,IAAI;wBACF,MAAM,aAAa,aAAa,OAAO,CAAC;wBACxC,IAAI,cAAc;4BAAC;4BAAS;4BAAQ;yBAAS,CAAC,QAAQ,CAAC,aAAa;4BAClE,aAAa;4BACb,cAAc;4BACd,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,kCAAkC;gCAAE,OAAO;4BAAW;wBACtF;oBACF,EAAE,OAAO,OAAO;wBACd,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,8BAA8B;oBAC9D;gBACF;gBAEA,+BAA+B;gBAC/B,IAAI,eAAe,OAAO;oBACxB,cAAc;gBAChB;gBAEA,MAAM,WAAW,uBAAuB;gBAExC,8BAA8B;gBAC9B,IAAI,aAAa,sBAAsB;oBACrC,iBAAiB;oBACjB,YAAY,SAAS,CAAC,MAAM,CAAC,SAAS;oBACtC,YAAY,SAAS,CAAC,GAAG,CAAC;oBAC1B,YAAY,YAAY,CAAC,cAAc;oBACvC,YAAY,KAAK,CAAC,WAAW,CAAC,gBAAgB;oBAC9C,SAAS,IAAI,EAAE,aAAa,cAAc;oBAC1C,SAAS,IAAI,EAAE,MAAM,YAAY,gBAAgB;oBACjD,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,uCAAuC;wBACnE,YAAY;wBACZ,SAAS;oBACX;gBACF,OAAO;oBACL,iBAAiB;oBACjB,iBAAiB;oBACjB,wBAAwB;oBACxB,YAAY,YAAY,CAAC,cAAc;oBACvC,YAAY,KAAK,CAAC,WAAW,CAAC,gBAAgB;oBAC9C,SAAS,IAAI,EAAE,aAAa,cAAc;oBAC1C,SAAS,IAAI,EAAE,MAAM,YAAY,gBAAgB;oBACjD,uHAAA,CAAA,SAAM,CAAC,KAAK,CAAC,kBAAkB,8BAA8B;wBAC3D,OAAO;wBACP,UAAU;oBACZ;gBACF;gBAEA,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,kBAAkB,qCAAqC;oBACjE,OAAO;oBACP;oBACA,QAAQ;oBACR,aAAa,YAAY,SAAS;gBACpC;YACF,EAAE,OAAO,OAAO;gBACd,uHAAA,CAAA,SAAM,CAAC,KAAK,CAAC,kBAAkB,+BAA+B;gBAC9D,cAAc;gBACd,MAAM,OAAO,SAAS,eAAe;gBACrC,MAAM,OAAO,SAAS,IAAI;gBAC1B,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;gBAC/B,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB,KAAK,YAAY,CAAC,cAAc;gBAChC,KAAK,KAAK,CAAC,WAAW,CAAC,gBAAgB;gBACvC,IAAI,MAAM;oBACR,KAAK,YAAY,CAAC,cAAc;oBAChC,KAAK,KAAK,CAAC,WAAW,CAAC,gBAAgB;gBACzC;gBACA,iBAAiB;YACnB;QACF;QAEA,2BAA2B;QAC3B;IACF,GAAG,EAAE,GAAG,yBAAyB;IAEjC,kBAAkB;IAClB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,wCAAmC;;QAEnC,MAAM;QAEN,MAAM;IA0BR,GAAG;QAAC;QAAO;KAAe;IAE1B,MAAM,eAAiC;QACrC;QACA;QACA;QACA;IACF;IAEA,qBACE,8OAAC,aAAa,QAAQ;QAAC,OAAO;kBAC5B,cAAA,8OAAC;YAAI,WAAW,aAAa,IAAI;YAAE,wBAAwB;sBACxD;;;;;;;;;;;AAIT;AAGO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 2920, "column": 0}, "map": {"version":3,"sources":["file:///Users/user/loop/loop/src/renderer/app/ClientLayout.tsx"],"sourcesContent":["'use client';\n\nimport React, { ReactNode, useState, useLayoutEffect, useEffect } from 'react';\nimport { usePathname, useRouter } from 'next/navigation';\nimport { AppSidebar } from '../components/layout/AppSidebar';\nimport { AppHeader } from '../components/layout/AppHeader';\nimport { MonitoringProvider } from '../contexts/GlobalMonitoringContext';\nimport { AuthProvider } from '../contexts/AuthContext';\nimport { ThemeProvider } from '../providers/ThemeProvider';\nimport { Logger } from '../../shared/logger';\nimport './globals.css';\n\ninterface ClientLayoutProps {\n    readonly children: ReactNode;\n    readonly initialAuth?: any;\n}\n\nexport default function ClientLayout({ children, initialAuth }: ClientLayoutProps): React.ReactElement {\n    const [sidebarCollapsed, setSidebarCollapsed] = useState<boolean>(false);\n    const [isClientMounted, setIsClientMounted] = useState<boolean>(false);\n    const pathname = usePathname();\n    const router = useRouter();\n\n    // restore sidebar state before paint\n    useLayoutEffect(() => {\n        if (typeof window !== 'undefined') {\n            try {\n                const savedState = localStorage.getItem('sidebar-collapsed');\n                if (savedState === 'true') {\n                    setSidebarCollapsed(true);\n                }\n                Logger.debug('LAYOUT', 'Sidebar state restored immediately', { collapsed: savedState === 'true' });\n            } catch (error) {\n                Logger.error('LAYOUT', 'Failed to restore sidebar state', error);\n            }\n        }\n        setIsClientMounted(true);\n    }, []);\n\n    const handleNavigate = (href: string): void => {\n        try {\n            if (typeof window === 'undefined') return;\n\n            // Parse the URL to validate it\n            let url: URL | null = null;\n            try {\n                url = new URL(href, window.location.href);\n            } catch (e) {\n                // malformed URL - block navigation\n                Logger.warn('LAYOUT', 'Blocked malformed navigation URL', { href });\n                return;\n            }\n\n            const isSameOrigin = url.origin === window.location.origin;\n            const isRelative = href.startsWith('/');\n\n            if (isRelative || isSameOrigin) {\n                // Use Next.js router for internal navigation (client-side routing)\n                Logger.debug('LAYOUT', 'Client-side navigation', { href });\n                router.push(href);\n            } else {\n                // treat as external - open in new tab/window safely\n                Logger.debug('LAYOUT', 'External navigation', { href });\n                window.open(url.toString(), '_blank', 'noopener,noreferrer');\n            }\n        } catch (e) {\n            Logger.warn('LAYOUT', 'Blocked unsafe navigation attempt', { href, error: e });\n        }\n    };\n\n    const handleToggleSidebar = (): void => {\n        const newState = !sidebarCollapsed;\n        setSidebarCollapsed(newState);\n\n        if (typeof window !== 'undefined') {\n            try {\n                localStorage.setItem('sidebar-collapsed', newState.toString());\n                Logger.debug('LAYOUT', 'Sidebar state saved', { collapsed: newState });\n            } catch (error) {\n                Logger.error('LAYOUT', 'Failed to save sidebar state', error);\n            }\n        }\n    };\n\n    return (\n        <ThemeProvider defaultTheme=\"system\">\n            <AuthProvider initialAuth={initialAuth}>\n                <MonitoringProvider>\n                    <div className=\"min-h-screen flex min-w-0 app-root\">\n                        <aside className=\"flex-shrink-0\">\n                            <AppSidebar\n                                activeRoute={pathname}\n                                onNavigate={handleNavigate}\n                                collapsed={sidebarCollapsed}\n                                onToggleCollapse={handleToggleSidebar}\n                            />\n                        </aside>\n\n                        <main className=\"flex-1 flex flex-col min-w-0\">\n                            <header className=\"flex-shrink-0\">\n                                <AppHeader />\n                            </header>\n\n                            <div className=\"flex-1 min-w-0 p-6 overflow-y-auto\">\n                                {children}\n                            </div>\n                        </main>\n                    </div>\n                </MonitoringProvider>\n            </AuthProvider>\n        </ThemeProvider>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;;AAiBe,SAAS,aAAa,EAAE,QAAQ,EAAE,WAAW,EAAqB;IAC7E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAClE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAChE,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,qCAAqC;IACrC,CAAA,GAAA,qMAAA,CAAA,kBAAe,AAAD,EAAE;QACZ,uCAAmC;;QAUnC;QACA,mBAAmB;IACvB,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAC;QACpB,IAAI;YACA,wCAAmC;;YAEnC,+BAA+B;YAC/B,IAAI;YASJ,MAAM;YACN,MAAM;QAWV,EAAE,OAAO,GAAG;YACR,uHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,UAAU,qCAAqC;gBAAE;gBAAM,OAAO;YAAE;QAChF;IACJ;IAEA,MAAM,sBAAsB;QACxB,MAAM,WAAW,CAAC;QAClB,oBAAoB;QAEpB,uCAAmC;;QAOnC;IACJ;IAEA,qBACI,8OAAC,8IAAA,CAAA,gBAAa;QAAC,cAAa;kBACxB,cAAA,8OAAC,2IAAA,CAAA,eAAY;YAAC,aAAa;sBACvB,cAAA,8OAAC,uJAAA,CAAA,qBAAkB;0BACf,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAM,WAAU;sCACb,cAAA,8OAAC,sJAAA,CAAA,aAAU;gCACP,aAAa;gCACb,YAAY;gCACZ,WAAW;gCACX,kBAAkB;;;;;;;;;;;sCAI1B,8OAAC;4BAAK,WAAU;;8CACZ,8OAAC;oCAAO,WAAU;8CACd,cAAA,8OAAC,qJAAA,CAAA,YAAS;;;;;;;;;;8CAGd,8OAAC;oCAAI,WAAU;8CACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjC","debugId":null}}]
}